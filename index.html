<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown Notes Viewer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Source+Serif+4:ital,opsz,wght@0,8..60,400;0,8..60,600;1,8..60,400&display=swap" rel="stylesheet">
    <style><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>git-Links</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <style>
        body {
            padding-top: 70px;
        }
        .search-bar-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background-color: #f8f9fa;
            padding: 15px;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .search-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }
        #search-bar {
            background-color: #fff;
            border: 1px solid #ced4da;
            padding-right: 40px;
        }
        #voice-search-btn {
            position: absolute;
            right: 10px;
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
        }
        #voice-search-btn.listening {
            color: #dc3545;
        }
        #links-table td {
            padding: 10px;
            border-bottom: 1px solid #ccc;
        }
        .section-header {
            background-color: #e9ecef;
            font-weight: bold;
            text-transform: uppercase;
        }
    </style>
</head>
<body>
    <div class="search-bar-container">
        <div class="container">
            <div class="search-wrapper">
                <input type="text" id="search-bar" class="form-control" placeholder="Search links...">
                <button id="voice-search-btn" title="Search by voice">
                    üé§
                </button>
            </div>
        </div>
    </div>
    <div class="container mt-3">
        <table id="links-table" class="table">
            <tbody>
                <!-- Links will be dynamically added here -->
            </tbody>
        </table>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        const links = [
            {
                category: "Shiva's GitHub Links", links: [
                    { url: "https://github.com/ShivaPrasadAcharya/links.git.io/blob/main/index.html", title: "EDITABLE LINK", editUrl: "https://github.com/ShivaPrasadAcharya/links.git.io/blob/main/index.html", description: "Edit your link from here" },
                    { url: "https://github.com/ShivaPrasadAcharya?tab=repositories", title: "REPOS", editUrl: "https://github.com/ShivaPrasadAcharya?tab=repositories", description: "Shiva's Repos" },
                    { url: "https://ShivaPrasadAcharya.github.io/trialwebpage.git.io", title: "Trial React Webpage-with .git.io & both capitalized ", editUrl: "https://github.com/ShivaPrasadAcharya/trialwebpage.git.io", description: "Trial Webpage from React-with .git.io & both capitalized repo username" },
                    { url: "https://ShivaPrasadAcharya.github.io/trialwebpage.git.io", title: "Trial React Webpage-with .git.io & first capitalized and second smallized ", editUrl: "https://github.com/shivaprasadacharya/trialwebpage.git.io", description: "Trial Webpage from React-with .git.io & one capitalized-webaddress, file address -smallized" },
                    { url: "https://shivaprasadacharya.github.io/trialwebpage.git.io", title: "Trial React Webpage-with .git.io & first capitalized and second smallized ", editUrl: "https://github.com/ShivaPrasadAcharya/trialwebpage.git.io", description: "Trial Webpage from React-with .git.io & smallized-webaddress, file address -capitalized-username" },
                    { url: "https://shivaprasadacharya.github.io/trialwebpage.git.io", title: "Trial React Webpage-with git.io & both smallized", editUrl: "https://github.com/shivaprasadacharya/trialwebpage.git.io", description: "Trial Webpage from React-.git.io & both smallized letter of user name of github" },
                    { url: "https://ShivaPrasadAcharya.github.io/trialwebpage", title: "Trial React Webpage-without .git.io & both capitalized", editUrl: "https://github.com/ShivaPrasadAcharya/trialwebpage", description: "Trial Webpage from React-without .git.io repo user name both Capitalized" },
             
                    { url: "https://shivaprasadacharaya.github.io/trialwebpage", title: "Trial React Webpage-without .git.io & both smallized", editUrl: "https://github.com/shivaprasadacharaya/trialwebpage", description: "Trial Webpage from React-without .git.io repo user name both smallized" },
                           { url: "https://github.com/ShivaPrasadAcharya/homework.git.io", title: "office howework/classwork", editUrl: "https://github.com/ShivaPrasadAcharya/homework.git.io", description: "Office Homework, Vscode homework, do homework and again upload" },
                    { url: "https://github.com/ShivaPrasadAcharya/homework.git.io", title: "office howework/classwork", editUrl: "https://github.com/ShivaPrasadAcharya/homework.git.io", description: "Office Homework, Vscode homework, do homework and again upload" },
                    { url: "https://github.com/ShivaPrasadAcharya/tippot.git.io", title: "CB cases tippot", editUrl: "https://github.com/ShivaPrasadAcharya/tippot.git.io", description: "Tippot of constitutional bench cases, Vscode tippot, do tippot and again upload, cb" },
                    { url: "https://shivaprasadacharya.github.io/legaltextconverter.git.io/", title: "legal text to table", editUrl: "https://github.com/ShivaPrasadAcharya/legaltextconverter.git.io", description: "Legal TExt converter, convert laws file into table," },
                    { url: "hhttps://shivaprasadacharya.github.io/rearrangetextintablerowswithappropriatelinebreaks.git.io/", title: "Legal Text to Table Rows with BREAKS", editUrl: "https://github.com/ShivaPrasadAcharya/rearrangetextintablerowswithappropriatelinebreaks.git.io/", description: "Legal TExt converter, convert laws file into table rows, line breaks, para breaks," },
                    { url: "https://shivaprasadacharya.github.io/najirmanagement.git.io/", title: "‡§®‡§ú‡§ø‡§∞, najir, supreme court", editUrl: "https://github.com/ShivaPrasadAcharya/najirmanagement.git.io/edit/main/data1.js", description: "Precedent management, supreme court, cb, constitutional bench" },
                    { url: "https://shivaprasadacharya.github.io/sampleofmanagementsystem.git.io/", title: "sms,sample of mgmt system", editUrl: "https://github.com/ShivaPrasadAcharya/sampleofmanagementsystem.git.io/edit/main/data1Trainees.js", description: "Create other sites from this sample, user friendly, search friendly, images, documents, links" },
                    { url: "https://shivaprasadacharya.github.io/nyayikawaj10.git.io/", title: "nyayik awaj, ‡§®‡•ç‡§Ø‡§æ‡§Ø‡§ø‡§ï ‡§Ü‡§µ‡§æ‡§ú, jos", editUrl: "https://github.com/ShivaPrasadAcharya/nyayikawaj10.git.io/edit/main/data1Trainees.js", description: "journal, judicial officer's society, nyayik awaj, 2082" },
                    { url: "https://shivaprasadacharya.github.io/tableandtexttocsvconverter.git.io/", title: " for ‡§®‡§ú‡§ø‡§∞, najir, table, csv, converter", editUrl: "https://github.com/ShivaPrasadAcharya/tableandtexttocsvconverter.git.io/edit/main/index.html", description: "Precedent management, supreme court, cb, constitutional bench, data, faishala, rayakitab" },
                    { url: "https://shivaprasadacharya.github.io/multiformatconverter.git.io/", title: "Multiformat Editor, Add column", editUrl: "https://github.com/ShivaPrasadAcharya/multiformatconverter.git.io/edit/main/index.html", description: "add, insert and remove, delete column in different table format" },
                    { url: "https://shivaprasadacharya.github.io/htmltocsvconverter.git.io/", title: "Html, csv, Editor", editUrl: "https://github.com/ShivaPrasadAcharya/htmltocsvconverter.git.io/edit/main/index.html", description: "convert html table to csv, tsv, psv, etc file format" },
                    { url: "https://shivaprasadacharya.github.io/textseparator-converter.git.io/", title: "Text separation in various format", editUrl: "https://github.com/ShivaPrasadAcharya/textseparator-converter.git.io/edit/main/index.html", description: "csv, tsv, ssv, rsv and vice versa conversion" },
                    { url: "https://shivaprasadacharya.github.io/csvfileofcbmirroring.git.io/", title: "CB csv file mirror", editUrl: "https://github.com/ShivaPrasadAcharya/csvfileofcbmirroring.git.io/edit/main/data.csv", description: "constitutional bench record, csv file attached, data can be updated by updating csv file" },
                    { url: "https://tucdc.edu.np/upload_file/files/post/1638937333_638022222_Buddhist%20Studies(First-Second%20Year)-7-4-2021.pdf/", title: "Buddhism TU syllables", editUrl: "https://tucdc.edu.np/upload_file/files/post/1638937333_638022222_Buddhist%20Studies(First-Second%20Year)-7-4-2021.pdf", description: " out of 4- year Bachelor syllables only 2 year is available., Buddhist study, Buddha" },
                    { url: "https://shivaprasadacharya.github.io/meditracker.git.io/", title: "MediTracker", editUrl: "https://github.com/ShivaPrasadAcharya/meditracker.git.io/edit/main/index.html", description: "Medicine Tracker." },
                     { url: "https://shivaprasadacharya.github.io/mylinks.git.io/",    title: "My Links for news etc ", editUrl:"https://github.com/ShivaPrasadAcharya/mylinks.git.io/edit/main/data.js", description: " 6 html files, links for cases, court orders, published imp news etc, "}, 
                    { url: "https://github.com/ShivaPrasadAcharya/apkfilestore.git.io/blob/main/multipletimeline2.apk", title: "APK Files", editUrl: "https://github.com/ShivaPrasadAcharya/apkfilestore.git.io", description: "Shiva's APK file stores, multipletimeline2, add more here" },
                    { url: "https://shivaprasadacharya.github.io/favoritequotes.git.io/",  title: "Favorite Quotes",  editUrl: "https://github.com/ShivaPrasadAcharya/favoritequotes.git.io/blob/main/index.html",  description: "3 favorites, single index.html file, real data is not displayed, problem unknown."},
 { url: "https://shivaprasadacharya.github.io/aicommand.git.io/",    title: "AI command", editUrl:"https://github.com/ShivaPrasadAcharya/aicommand.git.io/edit/main/data.js", description: "AI commands, ai inputs, this help to give proper prompt to AI, both language.",},
                    { url: "https://shivaprasadacharya.github.io/tables.git.io/",    title: "Tables for lok sewa", editUrl:"https://github.com/ShivaPrasadAcharya/tables.git.io/edit/main/data.js", description: "Educational tables, psc, JS table notes, US notes, tablenotes,",},
                     { url: "https://shivaprasadacharya.github.io/saintsandsages.git.io/",    title: "Quotes of saints and sages", editUrl:"https://github.com/ShivaPrasadAcharya/saintsandsages.git.io/edit/main/data.js", description: "scriptual quotes, spiritual quotes, shastra, scriptures"}, 
                     { url: "https://shivaprasadacharya.github.io/districtjudgepreparation.git.io/",    title: "DJ1, district judge preparation", editUrl:"https://github.com/ShivaPrasadAcharya/districtjudgepreparation.git.io/edit/main/index.html", description: "district judge examination preparation, 2082, ‡§ú‡§ø‡§≤‡•ç‡§≤‡§æ ‡§®‡•ç‡§Ø‡§æ‡§Ø‡§æ‡§ß‡§ø‡§∂ ‡§§‡§Ø‡§æ‡§∞‡•Ä"}, 
                     { url: "https://shivaprasadacharya.github.io/djpreparation.git.io/",    title: "DJ2, district judge preparation-latest", editUrl:"https://github.com/ShivaPrasadAcharya/djpreparation.git.io/edit/main/index.html", description: "district judge examination preparation, 2082, ‡§ú‡§ø‡§≤‡•ç‡§≤‡§æ ‡§®‡•ç‡§Ø‡§æ‡§Ø‡§æ‡§ß‡§ø‡§∂ ‡§§‡§Ø‡§æ‡§∞‡•Ä"}, 
                     { url: "https://shivaprasadacharya.github.io/djpreparation3.git.io/",    title: "DJ3, district judge preparation-3", editUrl:"https://github.com/ShivaPrasadAcharya/djpreparation3.git.io/edit/main/index.html", description: "district judge examination preparation3, 2082, ‡§ú‡§ø‡§≤‡•ç‡§≤‡§æ ‡§®‡•ç‡§Ø‡§æ‡§Ø‡§æ‡§ß‡§ø‡§∂ ‡§§‡§Ø‡§æ‡§∞‡•Ä"}, 
                     { url: "https://shivaprasadacharya.github.io/bestnotes.git.io/",    title: "Best Notes of lok sewa", editUrl:"https://github.com/ShivaPrasadAcharya/bestnotes.git.io/edit/main/data.js", description: "Educational notes, psc, JS notes, US notes, study materials, learning resources, academic content,",},
                     {  url: "https://shivaprasadacharya.github.io/cumulativedictionary.git.io/",
  title: "Online Cumulative Dictionary",
  editUrl: "https://github.com/ShivaPrasadAcharya/cumulativedictionary.git.io/edit/main/index.html",
  description: "Free online Cumulative dictionary, word meaning, law, has no features of manually inserting data in the source code",},
                    { url: "https://shivaprasadacharya.github.io/dictionary.git.io/", title: "Online Legal Dictionary", editUrl: "https://github.com/ShivaPrasadAcharya/dictionary.git.io/edit/main/index.html", description: "Free online Legal dictionary, word meanings, translations, synonyms, antonyms, example sentences, precedents, learning resources", },
                    { url: "https://shivaprasadacharya.github.io/actionmatrix.git.io/",  title: "ACTION MATRIX",  editUrl: "https://github.com/ShivaPrasadAcharya/actionmatrix.git.io/edit/main/data.js",  description: "Interactive matrix visualization, action matrix, decision matrix, priority matrix, action plan",},
                    { url: "https://shivaprasadacharya.github.io/astrology.git.io/", title: "ASTROLOGY", editUrl: "https://github.com/ShivaPrasadAcharya/astrology.git.io/blob/main/index.html", description: "Tipan" },
                    { url: "https://shivaprasadacharya.github.io/agecalculator.git.io/", title: "AGE CALCULATOR", editUrl: "https://github.com/ShivaPrasadAcharya/agecalculator.git.io/blob/main/index.html", description: "age finder, calcualte age based on DOB and custom reference date" },
                    { url: "https://shivaprasadacharya.github.io/kundalinichart.git.io/", title: "KUNDALINI CHART", editUrl: "https://github.com/ShivaPrasadAcharya/kundalinichart.git.io/blob/main/index.html", description: "kundali, svg, birth chart, astrology, tipan, china" },
                    { url: "https://shivaprasadacharya.github.io/AswerTipsfor30thBarQuestion.git.io/", title: "BAR QA", editUrl: "https://github.com/ShivaPrasadAcharya/AswerTipsfor30thBarQuestion.git.io/blob/main/index.html", description: "non-functional" },
                    { url: "https://shivaprasadacharya.github.io/BarSyllables.git.io/", title: "BAR SYLLABLES (31TH)", editUrl: "https://github.com/ShivaPrasadAcharya/BarSyllables.git.io/blob/main/index.html", description: "Nepali & English" },
                    { url: "https://shivaprasadacharya.github.io/contactlistinservicetraining.git.io/", title: "CONTACT LIST", editUrl: "https://github.com/ShivaPrasadAcharya/contactlistinservicetraining.git.io/blob/main/index.html", description: "Nyaya Sewa Talim Kendra" }, { url: "https://shivaprasadacharya.github.io/casestatus.git.io/", title: "CASE STATUS", editUrl: "https://github.com/ShivaPrasadAcharya/casestatus.git.io/blob/main/index.html", description: "High Court Collection" },
                    { url: "https://shivaprasadacharya.github.io/collapsible-part-constitution.git.io/", title: "CONSTITUTION WITH COLLAPSIBLE PART", editUrl: "https://github.com/ShivaPrasadAcharya/collapsible-part-constitution.git.io/blob/main/index.html", description: "i Version" },
                    { url: "https://shivaprasadacharya.github.io/contactlistinservicetraining.git.io/", title: "CONTACT LIST", editUrl: "https://github.com/ShivaPrasadAcharya/contactlistinservicetraining.git.io/blob/main/index.html", description: "Nyaya Sewa Talim Kendra" }, 
                    { url: "https://shivaprasadacharya.github.io/casestatus.git.io/", title: "CASE STATUS", editUrl: "https://github.com/ShivaPrasadAcharya/casestatus.git.io/blob/main/index.html", description: "High Court Collection" },
                 
                    { url: "https://shivaprasadacharya.github.io/magfaram.git.io/", title: "Mag Faram, ‡§Æ‡§æ‡§ó ‡§´‡§æ‡§∞‡§Æ", editUrl: "https://github.com/ShivaPrasadAcharya/magfaram.git.io/edit/main/data.js", description: "‡§Æ‡§æ‡§ó ‡§´‡§æ‡§∞‡§Æ, ‡§∏‡§∞‡•ç‡§µ‡•ã‡§ö‡•ç‡§ö ‡§Ö‡§¶‡§æ‡§≤‡§§, pams" },
                                     
                    { url: "https://shivaprasadacharya.github.io/constitution.git.io/", title: "CONSTITUTION", editUrl: "https://github.com/ShivaPrasadAcharya/constitution.git.io/blob/main/index.html", description: "Complete (in .) with few footnotes" },
                    { url: "https://shivaprasadacharya.github.io/constitutionarticleonly.git.io/", title: "CONSTITUTION ARTICLES ONLY", editUrl: "https://github.com/ShivaPrasadAcharya/constitutionarticleonly.git.io/blob/main/index.html", description: "In i Only" },
                    { url: "https://shivaprasadacharya.github.io/courtorderastimeline.git.io/", title: "COURT ORDER Timeline ‡§Ü‡§¶‡•á‡§∂", editUrl: "https://github.com/ShivaPrasadAcharya/courtorderastimeline.git.io/edit/main/src/timelineData.js", description: "Court Orders especially of Constitutional Bench, CB" },
                    { url: "https://shivaprasadacharya.github.io/cbdatamgmt.git.io/", title: "CB data managemen system, case-bench", editUrl: "https://github.com/ShivaPrasadAcharya/cbdatamgmt.git.io/blob/main/index.html", description: "case-bench Data of Constitutional Bench, CB" },
                    { url: "https://shivaprasadacharya.github.io/reactdatamgmtsystem.git.io/", title: "Data management system ‚Äî mgmt, react, table", editUrl: "https://github.com/ShivaPrasadAcharya/reactdatamgmtsystem.git.io", description: "Data management system, mgmt, react, table, markdown, md, images" },
                    { url: "https://shivaprasadacharya.github.io/veryspecialtipsnew.git.io/", title: " very special tips/phrases for loksewa, section officer", editUrl: "https://github.com/ShivaPrasadAcharya/veryspecialtipsnew.git.io/edit/main/data3Links.js", description: "psc exam, section officer, loksewa, for ritu paudel maam" },
                    { url: "https://shivaprasadacharya.github.io/multipletimeline2.git.io/", title: "3 sample Timelines ", editUrl: "https://github.com/ShivaPrasadAcharya/multipletimeline2.git.io/edit/main/index.html", description: " 3 timelines with user friendly interface, no search bar" },
                    { url: "https://shivaprasadacharya.github.io/courtorders.git.io/", title: "COURT ORDERS", editUrl: "https://github.com/ShivaPrasadAcharya/courtorders.git.io/blob/main/index.html", description: "Court Orders links and samples -categorywise" },
                    { url: "https://shivaprasadacharya.github.io/courtorder.git.io/", title: "COURT ORDER-ADVANCED", editUrl: "https://github.com/ShivaPrasadAcharya/courtorder.git.io/blob/main/data.js", description: "Court Order ADVANCED links and samples -categorywise, advanced, latest, form included, original copy can be seen" },
                    { url: "https://shivaprasadacharya.github.io/familytreelaxmisunuwarcase.git.io/", title: "FAMILY TREE", editUrl: "https://github.com/ShivaPrasadAcharya/familytreelaxmisunuwarcase.git.io/blob/main/index.html", description: "non functional" },
                    { url: "https://shivaprasadacharya.github.io/federalprovinceelection2079.git.io/", title: "ELECTION 2079", editUrl: "https://github.com/ShivaPrasadAcharya/federalprovinceelection2079.git.io/blob/main/index.html", description: "Kanchanrup Nagarpalika" },
                    { url: "https://shivaprasadacharya.github.io/flowchat2.git.io/",    title: " FLOWCHART2",    editUrl: "https://github.com/ShivaPrasadAcharya/flowchat2.git.io/edit/main/data.js", description: "Interactive flowchart visualization, advanced flowchart, timeline, chart2",},
                    { url: "https://shivaprasadacharya.github.io/flowchartoffederallegislativeprocess.git.io/",  title: "Federal Legislative Process Flowchart", editUrl: "https://github.com/ShivaPrasadAcharya/flowchartoffederallegislativeprocess.git.io/blob/main/index.html", description: "Interactive flowchart visualization of the federal legislative process, law-making procedure, parliamentary system, bill passage workflow",},     
                    { url: "https://shivaprasadacharya.github.io/judicialreview.git.io/", title: "JUDICIAL REVIEW", editUrl: "https://github.com/ShivaPrasadAcharya/judicialreview.git.io/blob/main/index.html", description: "Task not completed" },
                    { url: "https://shivaprasadacharya.github.io/lawjournal.git.io/", title: "LAW JOURNAL", editUrl: "https://github.com/ShivaPrasadAcharya/lawjournal.git.io/blob/main/index.html", description: "List Only" },
                    { url: "https://shivaprasadacharya.github.io/legaldraft.git.io/", title: "LEGAL DRAFTS", editUrl: "https://github.com/ShivaPrasadAcharya/legaldraft.git.io/blob/main/index.html", description: "Few Samples" },
                    { url: "https://shivaprasadacharya.github.io/talikikaran.git.io/", title: "BIDHI TALIKIKARAN-TEXT 2 TABLE", editUrl: "https://github.com/ShivaPrasadAcharya/talikikaran.git.io/blob/main/index.html", description: "Convert legal text to table, Just table with ID, ID function of section number  " },
                    { url: "https://shivaprasadacharya.github.io/saraswotisutra.git.io/", title: "SARASWOTISUTRA", editUrl: "https://github.com/ShivaPrasadAcharya/saraswotisutra.git.io/blob/main/index.html", description: "NOTE MAKER, MARKDOWN CONTENT SUPPORTER" },
                    { url: "https://shivaprasadacharya.github.io/loksewa.git.io/", title: "LOK SEWA", editUrl: "https://github.com/ShivaPrasadAcharya/loksewa.git.io/blob/main/index.html", description: "Non functional link" },
                    { url: "https://shivaprasadacharya.github.io/NOTES.git.io/", title: "LOKSEWAPREP-SMART NOTES", editUrl: "https://github.com/ShivaPrasadAcharya/NOTES.git.io/blob/main/index.html", description: "Smart notes app for lok sewa preparation, psc notes, exam preparation, major services, joint-secretary, sahasachib", },
                    { url: "https://shivaprasadacharya.github.io/eNotes.git.io/", title: "eNotes", editUrl: "https://github.com/ShivaPrasadAcharya/eNotes.git.io/blob/main/data/notes.js", description: "enotes application, digital notes, online notes taking app, US notes, JS notes, psc notes, lok sewa", },
                    { url: "https://shivaprasadacharya.github.io/mantra.git.io/", title: "MANTRA & SLOKA", editUrl: "https://github.com/ShivaPrasadAcharya/mantra.git.io/blob/main/index.html", description: "Collection of Vedic Mantras and Stotras" },
                    { url: "https://shivaprasadacharya.github.io/mulukicivilcode.git.io/", title: "MULUKI CIVIL CODE", editUrl: "https://github.com/ShivaPrasadAcharya/mulukicivilcode.git.io/blob/main/index.html", description: "Full Content" },
                    { url: "https://shivaprasadacharya.github.io/nepal_timeline.git.io/", title: " NEPAL_TIMELINE", editUrl: "https://github.com/ShivaPrasadAcharya/nepal_timeline.git.io/blob/main/src/App.jsx", description: "An interactive bilingual timeline showcasing Nepal's public service reforms from the Rana period to present digital governance. Reform of Public Service in Nepal, single timeline" },
                    { url: "https://shivaprasadacharya.github.io/oktimeline.git.io/", title: " OKTIMELINE", editUrl: "https://github.com/ShivaPrasadAcharya/oktimeline.git.io/blob/main/src/App.jsx", description: "An interactive bilingual timeline showcasing Nepal's public service reforms from the Rana period to present digital governance. Reform of Public Service in Nepal, multiple timeline" },
                    { url: "https://shivaprasadacharya.github.io/printtimeline.git.io/", title: " Printable TIMELINE", editUrl: "https://github.com/ShivaPrasadAcharya/printtimeline.git.io/blob/main/src/App.jsx", description: "An interactive bilingual timeline showcasing Nepal's public service reforms from the Rana period to present digital governance. Reform of Public Service in Nepal, multiple print timeline, printable form in English, nepali language not supported" },
                    { url: "https://shivaprasadacharya.github.io/exptimeline.git.io/", title: " Experimental TIMELINE", editUrl: "https://github.com/ShivaPrasadAcharya/exptimeline.git.io/blob/main/src/App.jsx", description: "made from react js files, An interactive bilingual timeline showcasing Nepal's public service reforms from the Rana period to present digital governance. Reform of Public Service in Nepal, multiple print timeline, printable form in English, nepali language not supported in print, exp " },
                    { url: "https://shivaprasadacharya.github.io/casino.git.io/", title: " Casino TIMELINE", editUrl: "https://github.com/ShivaPrasadAcharya/casino.git.io/blob/main/src/App.jsx", description: "contains react js file & packages, An interactive bilingual timeline, image and pdf print timeline, index, footer, advance search, casino case of CB, hide and show content, timeline" },
                    { url: "https://shivaprasadacharya.github.io/administrativereform.git.io/", title: "ADMINISTRATIVE_REFORM", editUrl: "https://github.com/ShivaPrasadAcharya/administrativereform.git.io/blob/main/index.html", description: "administrative reforms and governance , timeline,  reports, administration" },
                    { url: "https://shivaprasadacharya.github.io/neopragya.git.io/", title: "NEOPRAGYA", editUrl: "https://github.com/ShivaPrasadAcharya/neopragya.git.io/blob/main/index.html", description: "Work on Process" },
                    { url: "https://shivaprasadacharya.github.io/neopragyatable.git.io/", title: "NEOPRAGYATABLE", editUrl: "https://github.com/ShivaPrasadAcharya/neopragyatable.git.io/blob/main/index.html", description: "Collection of table. Links are used in neopragya" },
                    { url: "https://shivaprasadacharya.github.io/pragyakosh.git.io/", title: "PRAGYAKOSH", editUrl: "https://github.com/ShivaPrasadAcharya/pragyakosh.git.io/blob/main/index.html", description: "Note: It has in text footnoting style" },
                    { url: "https://shivaprasadacharya.github.io/radhakrishna.git.io/", title: "NAGIRNIKUNJA", editUrl: "https://github.com/ShivaPrasadAcharya/radhakrishna.git.io/blob/main/index.html", description: "Note: Non-functional link" },
                    { url: "https://shivaprasadacharya.github.io/radhakrishna.github.io/", title: "RADHAKRSNA", editUrl: "https://github.com/ShivaPrasadAcharya/radhakrishna.github.io/blob/main/index.html", description: "3oth najirnikunja distribution" },
                    { url: "https://shivaprasadacharya.github.io/rayakitab.git.io/", title: "RAYAKITAB", editUrl: "https://github.com/ShivaPrasadAcharya/rayakitab.git.io/blob/main/index.html", description: "Rajbiraj High Court" },
                    { url: "https://shivaprasadacharya.github.io/sample1.git.io/", title: "COLUMNONELINK:SAMPLE1", editUrl: "https://github.com/ShivaPrasadAcharya/sample1.git.io/blob/main/index.html", description: "" },
                    { url: "https://shivaprasadacharya.github.io/natureofconstitutionalbenchorders.git.io/", title: "Nature of CB Orders",    editUrl: "https://github.com/ShivaPrasadAcharya/natureofconstitutionalbenchorders.git.io/blob/main/index.html",    description: "Nature and examples of constitutional bench orders of supreme court, cb, table, based on nyayik awaj article of shiva"},
                    { url: "https://shivaprasadacharya.github.io/constitutionalbenchdecisions.git.io/", title: "CB DECISIONS", editUrl: "https://github.com/ShivaPrasadAcharya/constitutionalbenchdecisions.git.io/blob/main/index.html", description: "cbdecisions of supreme court" },
                    { url: "https://shivaprasadacharya.github.io/sample2.git.io/", title: "COLUMNTWOLINK:SAMPLE2", editUrl: "https://github.com/ShivaPrasadAcharya/sample2.git.io/blob/main/index.html", description: "" },
                    { url: "https://shivaprasadacharya.github.io/supremecourtorders.git.io/", title: "SC ORDERS", editUrl: "https://github.com/ShivaPrasadAcharya/supremecourtorders.git.io/blob/main/index.html", description: "" },
                    { url: "https://shivaprasadacharya.github.io/srinajirnikunja30thbar.git.io/", title: "SRINAJIRNIKUNJA30TH", editUrl: "https://github.com/ShivaPrasadAcharya/srinajirnikunja30thbar.git.io/blob/main/index.html", description: "Note: Content cannot be cut, copied, print or downloaded. for this refer to debaka's site." },
                    { url: "https://shivaprasadacharya.github.io/tantra.git.io/", title: "TANTRA", editUrl: "https://github.com/ShivaPrasadAcharya/tantra.git.io/blob/main/index.html", description: "Note: ‡§Ü‡§ö‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ã ‡§™‡§æ‡§†‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ (‡§¶‡•Å‡§µ‡•à ‡§µ‡§∞‡•ç‡§∑‡§ï‡•ã)" },
                    { url: "https://shivaprasadacharya.github.io/tantranotes.git.io/", title: "TANTRANOTES", editUrl: "https://github.com/ShivaPrasadAcharya/tantranotes.git.io/blob/main/index.html", description: "Note: chat gpt ‡§¨‡§æ‡§ü ‡§¨‡§®‡§æ‡§è‡§ï‡•ã‡§≤‡•á ‡§§‡•ç‡§Ø‡§§‡§ø ‡§∞‡§æ‡§Æ‡•ç‡§∞‡•ã ‡§õ‡•à‡§®‡•§ ‡§Ö‡§ù ‡§™‡§∞‡§ø‡§∏‡•ç‡§ï‡•É‡§§ ‡§ó‡§∞‡•ç‡§® ‡§ú‡§∞‡•Ç‡§∞‡•Ä ‡§õ‡•§" },
                    { url: "https://shivaprasadacharya.github.io/undersecretaryexamnotes.git.io/", title: "EXAM NOTES OF US", editUrl: "https://github.com/ShivaPrasadAcharya/undersecretaryexamnotes.git.io/blob/main/index.html", description: "Note:It was bypassed by another style.There is No content." },
                    { url: "https://shivaprasadacharya.github.io/upasachibsyllables.git.io/", title: "US SYLLABLES", editUrl: "https://github.com/ShivaPrasadAcharya/upasachibsyllables.git.io/blob/main/index.html", description: "first & second paper of major services, under-secretary, upaschib, psc" },
                    
                    { url: "https://shivaprasadacharya.github.io/jointsecretary.git.io/", title: "JS SYLLABLES", editUrl: "https://github.com/ShivaPrasadAcharya/jointsecretary.git.io/blob/main/index.html", description: "first & second & third paper of major services, joint-secretary, sahasachib, psc" },
                    { url: "https://shivaprasadacharya.github.io/mynotes.git.io/", title: "JS SYLLABLES-MY NOTES", editUrl: "https://github.com/ShivaPrasadAcharya/mynotes.git.io/blob/main/index.html", description: "first & second & third paper of major services, joint-secretary, sahasachib, psc, notes," },
                    { url: "https://shivaprasadacharya.github.io/websiteofshiva/", title: "WEBSITE OF SHIVA", editUrl: "https://github.com/ShivaPrasadAcharya/websiteofshiva/blob/main/index.html", description: "GitHub, Quora & Research Gate" },
                    { url: "https://v0-new-project-jo1kllntqo7.vercel.app/", title: "To do list OF SHIVA", editUrl: "", description: "To do list of shiva, deployed through vercel" },
                    { url: "https://shivaprasadacharya.github.io/sloka.git.io/", title: "SLOKA", editUrl: "https://github.com/ShivaPrasadAcharya/sloka.git.io/blob/main/index.html", description: "Ravana Tandav Storam" },
                    { url: "https://shivaprasadacharya.github.io/vscodetricks.git.io/", title: "VSCODE TRICKS", editUrl: "https://github.com/ShivaPrasadAcharya/vscodetricks.git.io/blob/main/index.html", description: "" },
                    { url: "https://shivaprasadacharya.github.io/buttonssample.git.io/", title: "BUTTONS", editUrl: "https://github.com/ShivaPrasadAcharya/buttonssample.git.io/blob/main/index.html", description: "" },
                    { url: "https://shivaprasadacharya.github.io/najir.git.io/", title: "NAJIR", editUrl: "https://github.com/ShivaPrasadAcharya/najir.git.io/blob/main/index.html", description: "" },
                    { url: "https://shivaprasadacharya.github.io/problemsnsolutions.git.io/", title: "PROSOL", editUrl: "https://github.com/ShivaPrasadAcharya/problemsnsolutions.git.io/blob/main/index.html", description: "" },
                    { url: "https://shivaprasadacharya.github.io/najirform.git.io/", title: "NAJIRFORM", editUrl: "https://github.com/ShivaPrasadAcharya/najirform.git.io/blob/main/index.html", description: "" },
                    { url: "https://shivaprasadacharya.github.io/quotesform.git.io/", title: "QUOTESFORM", editUrl: "https://github.com/ShivaPrasadAcharya/quotesform.git.io/blob/main/index.html", description: "" },
                    { url: "https://shivaprasadacharya.github.io/phrasesnwords.git.io/", title: "PHRASESNWORDSFORM", editUrl: "https://github.com/ShivaPrasadAcharya/phrasesnwords.git.io/blob/main/index.html", description: "" },
                    { url: "https://shivaprasadacharya.github.io/opinionnnews.git.io/", title: "OPINIONNEWS", editUrl: "https://github.com/ShivaPrasadAcharya/opinionnnews.git.io/blob/main/index.html", description: "" },
                    { url: "https://shivaprasadacharya.github.io/interviewtips.git.io/", title: "INTERVIEW TIPS", editUrl: "https://github.com/ShivaPrasadAcharya/interviewtips.git.io/blob/main/index.html", description: "" },
                    { url: "https://shivaprasadacharya.github.io/inbaskettips.git.io/", title: "INBASKET TIPS", editUrl: "https://github.com/ShivaPrasadAcharya/inbaskettips.git.io/blob/main/index.html", description: "" },
   { url: "https://shivaprasadacharya.github.io/inbasket2.git.io/", title: "INBASKET-2 ‡§Æ‡§ú‡§¨‡•Å‡§®", editUrl: "https://github.com/ShivaPrasadAcharya/inbasket2.git.io/blob/main/index.html", description: "question, format, form, in basket 2, inbasket2, psc, psc problems" },
   { url: "https://shivaprasadacharya.github.io/inbasket3.git.io/", title: "INBASKET-3 detailed", editUrl: "https://github.com/ShivaPrasadAcharya/inbasket3.git.io/blob/main/index.html", description: "letterpad, question, in basket 3, with logo, images,  inbasket3,  psc problems, YES/NO security" },
   { url: "https://shivaprasadacharya.github.io/inbasket4.git.io/", title: "INBASKET-4 detailed -logoless", editUrl: "https://github.com/ShivaPrasadAcharya/inbasket4.git.io/blob/main/index.html", description: "question, format, form, in basket 4, logoless letterpad,  inbasket4, psc, psc problems, YES/NO security" },
   { url: "https://shivaprasadacharya.github.io/inbasket5.git.io/", title: "INBASKET-5 mobile screen", editUrl: "https://github.com/ShivaPrasadAcharya/inbasket5.git.io/blob/main/index.html", description: "mobile screen, mobile message, in basket psc" },
   { url: "https://shivaprasadacharya.github.io/inbasket6.git.io/", title: "INBASKET-6 advanced", editUrl: "https://github.com/ShivaPrasadAcharya/inbasket6.git.io/blob/main/index.html", description: "all varieties can be accomodated here,advance." },
                    { url: "https://shivaprasadacharya.github.io/webpagewithforms.git.io/", title: "FORMS", editUrl: "https://github.com/ShivaPrasadAcharya/webpagewithforms.git.io/blob/main/index.html", description: "" },
                    { url: "https://shivaprasadacharya.github.io/samayojan.git.io/", title: "SAMAYOJAN FAISHALA", editUrl: "https://github.com/ShivaPrasadAcharya/samayojan.git.io/blob/main/index.html", description: "‡§ï‡§æ.‡§µ‡•ç‡§Ø.‡§ï‡•ã ‡§¨‡§π‡§∏ ‡§Æ‡§æ‡§§‡•ç‡§∞" },
                    { url: "https://shivaprasadacharya.github.io/likhitdrafts.git.io/", title: "‡§¨‡•à‡§®‡§æ ‡§ï‡§æ‡§ó‡§ú", editUrl: "https://github.com/ShivaPrasadAcharya/likhitdrafts.git.io/blob/main/index.html", description: "contains input fields" },
                    { url: "https://shivaprasadacharya.github.io/articles.git.io/", title: "ARTICLES", editUrl: "https://github.com/ShivaPrasadAcharya/articles.git.io/blob/main/index.html", description: "For Making Notes Using Input Value." },
                    { url: "https://shivaprasadacharya.github.io/bpsg.git.io/", title: "BPSG 454, 2081", editUrl: "https://github.com/ShivaPrasadAcharya/bpsg.git.io/blob/main/index.html", description: "Syllables and Notes of PSM II" },
                    { url: "https://shivaprasadacharya.github.io/bpsg2082.git.io/", title: "BPSG 454, 2082", editUrl: "https://github.com/ShivaPrasadAcharya/bpsg2082.git.io/blob/main/index.html", description: "Assingments and contact directory" },
                    { url: "https://shivaprasadacharya.github.io/pkbpsg2082.git.io/", title: "PKBPSG 454, 2082 -site II", editUrl: "https://github.com/ShivaPrasadAcharya/pkbpsg2082.git.io/blob/main/index.html", description: "new bpsg 2082 site, 2nd website, " },
                    { url: "https://shivaprasadacharya.github.io/pkbpsg.git.io/", title: "PKBPSG 454, 2082 -site III", editUrl: "https://github.com/ShivaPrasadAcharya/pkbpsg.git.io/blob/main/index.html", description: "new bpsg 2082 site, 3rd website, " },
                    { url: "https://shivaprasadacharya.github.io/psm2bpsg/", title: "PKBPSG 454, 2082 -4th batch", editUrl: "https://github.com/ShivaPrasadAcharya/psm2bpsg/blob/main/index.html", description: "4th batch, 2082-mansir, " },
                    { url: "https://shivaprasadacharya.github.io/akaladevi.git.io/", title: "‡§Ö‡§ï‡§≤‡§æ‡§¶‡•á‡§µ‡•Ä, AkalaDevi, lamachour, temple,", editUrl: "https://github.com/ShivaPrasadAcharya/akaladevi.git.io/blob/main/index.html", description: "‡§Ö‡§ï‡§≤‡§æ‡§¶‡•á‡§µ‡•Ä,dedicated to Akaladevi, as a remorse for ..." },
                    { url: "https://shivaprasadacharya.github.io/arrowchart.git.io/", title: "ARROW CHART", editUrl: "https://github.com/ShivaPrasadAcharya/arrowchart.git.io/blob/main/index.html", description: "A hierarchical structures using arrows." },
                    { url: "https://shivaprasadacharya.github.io/randomname.git.io/", title: "RANDOM NAME, bpsg-2079", editUrl: "https://github.com/ShivaPrasadAcharya/randomname.git.io/blob/main/index.html", description: "BPSG-454: Random Name Generator" },
                    { url: "https://shivaprasadacharya.github.io/stagesofconflict.git.io/", title: "STAGES OF CONFLICT", editUrl: "https://github.com/ShivaPrasadAcharya/stagesofconflict.git.io/blob/main/index.html", description: "Diagram" },
                    { url: "https://shivaprasadacharya.github.io/endnotesforarticles.git.io/", title: "CONTENT & ENDNOTEGENERATOR", editUrl: "https://github.com/ShivaPrasadAcharya/endnotesforarticles.git.io/blob/main/index.html", description: "The output1 should be copied & pasted in this webpage source code whereas other output should be copied and pasted in articles webpage." },
                    { url: "https://shivaprasadacharya.github.io/labfordynamicwebpage.git.io/", title: "LAB", editUrl: "https://github.com/ShivaPrasadAcharya/labfordynamicwebpage.git.io/blob/main/index.html", description: "This is experimental file for input and outputs of dynamic webpage" },
                    { url: "https://shivaprasadacharya.github.io/contactlistrajhc.git.io/", title: "CONTACT LIST OF RAJ HC", editUrl: "https://github.com/ShivaPrasadAcharya/contactlistrajhc.git.io/blob/main/index.html", description: "Human Resource of RAjbiraj High Court" },
                    { url: "https://shivaprasadacharya.github.io/draftingrecord.git.io/", title: "DRAFTING RECORD", editUrl: "https://github.com/ShivaPrasadAcharya/draftingrecord.git.io/blob/main/index.html", description: "Drafting Status of Supreme Court Judgement of Shiva Prasad Acharya" },
                    { url: "https://shivaprasadacharya.github.io/lab0.git.io/", title: "LAB0", editUrl: "https://github.com/ShivaPrasadAcharya/lab0.git.io/blob/main/index.html", description: "small experimental html with autopopulation of input field but without functional buttons" },
                    { url: "https://shivaprasadacharya.github.io/lab2.git.io/", title: "LAB2", editUrl: "https://github.com/ShivaPrasadAcharya/lab2.git.io/blob/main/index.html", description: "Editable Webpages (editing source code through the edition of webpage)" },
                    { url: "https://shivaprasadacharya.github.io/lab3.git.io/", title: "LAB3", editUrl: "https://github.com/ShivaPrasadAcharya/lab3.git.io/blob/main/index.html", description: "For Input and output in same webpage having endnotes of main text." },
                    { url: "https://shivaprasadacharya.github.io/lab4.git.io/", title: "LAB4", editUrl: "https://github.com/ShivaPrasadAcharya/lab4.git.io/blob/main/index.html", description: "For input and output having footnotes in main text in separate container" },
                    { url: "https://shivaprasadacharya.github.io/lab5.git.io/", title: "LAB 5", editUrl: "https://github.com/ShivaPrasadAcharya/lab5.git.io/blob/main/index.html", description: "Main text with footnotes beneath it which is displayed on click of hyperlinked" },
                    { url: "https://shivaprasadacharya.github.io/lab6.git.io/", title: "LAB6", editUrl: "https://github.com/ShivaPrasadAcharya/lab6.git.io/blob/main/index.html", description: "Main text with footnote beneath the text with consecutive numbering system (for single array)" },
                    { url: "https://shivaprasadacharya.github.io/landmarkorders.git.io/", title: "LANDMARK ORDERS", editUrl: "https://github.com/ShivaPrasadAcharya/landmarkorders.git.io/blob/main/index.html", description: "collection of landmark orders and decisions" },
                    { url: "https://shivaprasadacharya.github.io/politicsandadministration.git.io/", title: "POLITICS & ADMINISTRATION", editUrl: "https://github.com/ShivaPrasadAcharya/politicsandadministration.git.io/blob/main/index.html", description: "Contains articles, keywords, Quotes related to politics and administration" },
                    { url: "https://shivaprasadacharya.github.io/constitutionalbenchorders.git.io/", title: "CB ORDERS", editUrl: "https://github.com/ShivaPrasadAcharya/constitutionalbenchorders.git.io/blob/main/index.html", description: "Constituional Bench Order Collection" },
                    { url: "https://shivaprasadacharya.github.io/bpsg7.git.io/", title: "BPSG 7TH SEM, 2079", editUrl: "https://github.com/ShivaPrasadAcharya/bpsg7.git.io/blob/main/index.html", description: "Article writing guideline,contact list, syllables" },
                    { url: "https://shivaprasadacharya.github.io/largelab.git.io/", title: "LARGE LAB", editUrl: "https://github.com/ShivaPrasadAcharya/largelab.git.io/blob/main/index.html", description: "large lab with 64 inputs and GIF" },
                    { url: "https://shivaprasadacharya.github.io/srimadbhagawadgitalab.git.io/", title: "SRIMADBHAGAWADGITA LAB", editUrl: "https://github.com/ShivaPrasadAcharya/srimadbhagawadgitalab.git.io/blob/main/index.html", description: "lab for Experimenting Gita Verses" },
                    { url: "https://shivaprasadacharya.github.io/links.git.io/", title: "SWITCH TO MASTER LINK", editUrl: "https://github.com/ShivaPrasadAcharya/links.git.io/blob/main/index.html", description: "Go to Parent Page" },
                    { url: "https://shivaprasadacharya.github.io/dataarray-replace.git.io/", title: "REPLACE DATA ARRAY", editUrl: "https://github.com/ShivaPrasadAcharya/dataarray-replace.git.io/blob/main/index.html", description: "Generating and Replace Data Array. Replace will not expand data array" },
                    { url: "https://shivaprasadacharya.github.io/dataarray-insert.git.io/", title: "INSERT DATA ARRAY", editUrl: "https://github.com/ShivaPrasadAcharya/dataarray-insert.git.io/blob/main/index.html", description: "Generating and Inserting Data array. Insert will expand data array." },
                    { url: "https://shivaprasadacharya.github.io/judicialpronouncement.git.io/", title: "JUDICIAL PRONOUNCEMENT", editUrl: "https://github.com/ShivaPrasadAcharya/judicialpronouncement.git.io/blob/main/index.html", description: "Judicial Pronouncement of (especially of) SC of Nepal" },
                    { url: "https://shivaprasadacharya.github.io/calljudiciary.git.io/", title: "CALL JUDICIARY", editUrl: "https://github.com/ShivaPrasadAcharya/calljudiciary.git.io/blob/main/index.html", description: "Contact List of Gazetted officer of Judiciary (2081)" },
                    { url: "https://shivaprasadacharya.github.io/callbpsgforthbatch/", title: "CALL BPSG 4th batch", editUrl: "https://github.com/ShivaPrasadAcharya/callbpsgforthbatch/blob/main/index.html", description: "Contact List of BPSG 4th batch of PK" },
                    { url: "https://shivaprasadacharya.github.io/calltreatytrainees.git.io/", title: "CALL Treaty Trainees", editUrl: "https://github.com/ShivaPrasadAcharya/calltreatytrainees.git.io/blob/main/index.html", description: "Contact List of Treaty Trainees, Nyaya Sewa Talim Kendra (2082), Negotiation" },
                    { url: "https://shivaprasadacharya.github.io/treatydraftingandnegotiation.git.io/", title: "Treaty Drafting and Negotiation-all in one", editUrl: "https://github.com/ShivaPrasadAcharya/treatydraftingandnegotiation.git.io/blob/main/index.html", description: "Contact List of Treaty Trainees, Nyaya Sewa Talim Kendra (2082), Negotiation, Treaty ppt, Handouts, advanced" },
                    { url: "https://shivaprasadacharya.github.io/nasc.git.io/", title: "STAFF COLLEGE", editUrl: "https://github.com/ShivaPrasadAcharya/nasc.git.io/blob/main/index.html", description: "Contact List of OPMD participants-Upaschib (2081)" },
                    { url: "https://shivaprasadacharya.github.io/sankalpa.git.io/", title: "SANKALPA", editUrl: "https://github.com/ShivaPrasadAcharya/sankalpa.git.io/blob/main/index.html", description: "Sankalpa for outstanding performance in DJ exam" },
                    { url: "https://shivaprasadacharya.github.io/proffessionalwords.git.io/", title: "PROF-WORDS", editUrl: "https://github.com/ShivaPrasadAcharya/proffessionalwords.git.io/blob/main/index.html", description: "administrative proffessional words" },
                    { url: "https://shivaprasadacharya.github.io/thankyou.git.io/", title: "Thank You Letter, District Judge", editUrl: "https://github.com/ShivaPrasadAcharya/thankyou.git.io/blob/main/index.html", description: "Thank You Letter, Shiva, DJ, District Judge" },
                    { url: "https://shivaprasadacharya.github.io/invitationtoanjansir.git.io/", title: "INVITATION TO ANJAN SIR", editUrl: "https://github.com/ShivaPrasadAcharya/invitationtoanjansir.git.io/blob/main/index.html", description: "Invitation to a special event" },
   { url: "https://shivaprasadacharya.github.io/congratulation.git.io/", title: "Congratulation to Bijay mishra sir.", editUrl: "https://github.com/ShivaPrasadAcharya/congratulation.git.io/blob/main/index.html", description: "congratulation for winning bar election, bj sir, both nepali and sanskrit language, flip card, " },
   { url: "https://shivaprasadacharya.github.io/happybirthday.git.io/", title: "Happy Birthday to Menaka", editUrl: "https://github.com/ShivaPrasadAcharya/happybirthday.git.io/blob/main/index.html", description: "happy birthday, sali, sister, menaka timilsina, both english and sanskrit language, flip card, " },
   { url: "https://shivaprasadacharya.github.io/mariagecongratulation.git.io/", title: "Happy Married Life to Shishir & Sushmita", editUrl: "https://github.com/ShivaPrasadAcharya/mariagecongratulation.git.io/blob/main/index.html", description: "happy marriage, friend, sisir, ‡§µ‡§ø‡§µ‡§æ‡§π, ‡§∂‡§ø‡§∂‡§ø‡§∞,  both english and sanskrit language, flip card, " },
   { url: "https://shivaprasadacharya.github.io/linktextwithtable.git.io/", title: "Text -Table Entanglement", editUrl: "https://github.com/ShivaPrasadAcharya/linktextwithtable.git.io/blob/main/index.html", description: "Text can be reference with table id to have the content available in the row, hyperlink table and text, legal text & legal table, useful tool" },
   { url: "https://shivaprasadacharya.github.io/manipulatetable.git.io/", title: " MANIPULATE TABLE", editUrl: "https://github.com/ShivaPrasadAcharya/manipulatetable.git.io/blob/main/index.html", description: "ADD, Delete column, input json, csv, md, output json, table view, copyable" },
                    { url: "https://shivaprasadacharya.github.io/cbcaserecord.git.io/", title: "CB CASE RECORDS", editUrl: "https://github.com/ShivaPrasadAcharya/cbcaserecord.git.io/blob/main/index.html", description: "This link shows the case records of constitutional bench. (cb)" },
                    { url: "https://shivaprasadacharya.github.io/nyayikawajarticle.git.io/", title: "NYAYIK AWAJ ARTICLE", editUrl: "https://github.com/ShivaPrasadAcharya/nyayikawajarticle.git.io/blob/main/index.html", description: "These are the materials collected for journal (‡§®‡•ç‡§Ø‡§æ‡§Ø‡§ø‡§ï ‡§Ü‡§µ‡§æ‡§ú, ‡•®‡•¶‡•Æ‡•ß)" }
                ]
            },
            {
                category: "Dear's GitHub Links", links: [
                    { url: "https://debakatimilsina.github.io/srinajirnikunja.git.io/", title: "SRI-NAJIRNIKUNJA FULL(30TH BAR)", editUrl: "https://github.com/debakatimilsina/srinajirnikunja.git.io/blob/main/index.html", description: "Content can be copied, printed and downloaded" },
{ url: "https://debakatimilsina.github.io/debakanotes.git.io/", title: "DEBAKA-SMART NOTES",    editUrl: "https://github.com/debakatimilsina/debakanotes.git.io/blob/main/index.html",   description: "Smart notes app for storing notes, quick reference, personal notes, study materials, important topics",},
                    {
  url: "https://shivaprasadacharya.github.io/idmanager.git.io/",  title: "ID MANAGER - DIGITAL ID VAULT",  editUrl: "https://github.com/ShivaPrasadAcharya/idmanager.git.io/blob/main/index.html",
  description: "Digital ID vault for securely storing and managing identification documents, cards, and personal credentials, ID", },
                    { url: "https://debakatimilsina.github.io/syllablesforbarexam.git.io/", title: "(31TH BAR SYLLABLES & MCQ)", editUrl: "https://github.com/debakatimilsina/syllablesforbarexam.git.io/blob/main/index.html", description: "31st bar exam syllables & sample mcq's" },
                    { url: "https://debakatimilsina.github.io/srinajirnikunja.git.io/", title: "SRI-NAJIRNIKUNJA FULL(30TH BAR)", editUrl: "https://github.com/debakatimilsina/srinajirnikunja.git.io/blob/main/index.html", description: "Content can be copied, printed and downloaded" },
                    { url: "https://debakatimilsina.github.io/syllablesforbarexam.git.io/", title: "(31TH BAR SYLLABLES & MCQ)", editUrl: "https://github.com/debakatimilsina/syllablesforbarexam.git.io/blob/main/index.html", description: "31st bar exam syllables & sample mcq's" },
                    { url: "https://debakatimilsina.github.io/modelmcqfor32barexam.git.io/", title: "MCQ FOR 32 BAR EXAM", editUrl: "https://github.com/debakatimilsina/modelmcqfor32barexam.git.io/edit/main/index.html", description: "Advocate licence exam-32nd, Najirnikunja" },
                    { url: "https://debakatimilsina.github.io/suvakamana.git.io/", title: "INNOVATIVE LEGAL SERVICE", editUrl: "https://github.com/debakatimilsina/suvakamana.git.io/blob/main/index.html", description: "Festive Greetings and Wishes, Dashain, Suvakamana" }
                ]
            },
            {
                category: "Other Links", links: [
                    { url: "https://docs.google.com/document/d/1wz6K4dlLiVI5TvpkFfgn6K1OV_CC5X2fBA7t2qjkFzI/edit?usp=share_link", title: "LAWEXAM.OBJ", editUrl: "", description: "" },
                    { url: "https://docs.google.com/document/d/1y9b9xF46g50KcybqNNxGqBxCD08E_9P_HYPlIAy67ec/edit?usp=share_link", title: "PRAGYADOC", editUrl: "", description: "Source:google drive:Collection of Najir etc." },
                    { url: "https://drive.google.com/file/d/10h63tVKyoclUvv3Hp5SbS2l2TruUTm-3/view?usp=share_link", title: "COLORPHOTO.JPG", editUrl: "", description: "Source:google drive" },
                    { url: "https://drive.google.com/file/d/1kNzLM-frttwAHsScgtJrWZiSAkUXYTF5/view?usp=share_link", title: "BARCOUNCILSYLLABLES 31TH", editUrl: "", description: "Source: google drive:pdf file. syllables in nepali only." },
                    { url: "https://drive.google.com/file/d/1kXqgJVf3CFxHswP7d1fzbfeUbJae2DZV/view?usp=share_link", title: "DEBAKACOLOR.JPG", editUrl: "", description: "Source: google drive" },
                    { url: "https://drive.google.com/file/d/1NZQCIsbWOGT-iX1aJUBslUb4tv8PqwKE/view?usp=share_link", title: "LAILU", editUrl: "", description: "" },
                    { url: "https://drive.google.com/file/d/1okZz_E0RjfRAqJ-_3mwkGXYzsJIhw8E2/view?usp=share_link", title: "PRAGYAPDF", editUrl: "", description: "" },
                    { url: "https://drive.google.com/file/d/1PKCakwjNNF4PJUwKH6GIIHHvUXAAaH8p/view?usp=share_link", title: "B&WPHOTO.JPG", editUrl: "", description: "" }
                ]
            }
        ];

        function createLinkRow(link) {
            return `
                <tr>
                    <td>
                        <a href="${link.url}" target="_blank">${link.title}</a>
                        ${link.editUrl ? `<a href="${link.editUrl}" target="_blank"> &#9999;</a>` : ''}
                        ${link.description ? `<br>${link.description}` : ''}
                    </td>
                </tr>
            `;
        }

        function renderLinks(linksToRender) {
            let html = '';
            linksToRender.forEach(category => {
                html += `
                    <tr class="section-header">
                        <td>${category.category}</td>
                    </tr>
                `;
                html += category.links.map(createLinkRow).join('');
            });
            linksTable.innerHTML = html;
        }

        function normalizeText(text) {
            // Remove dots and convert to lowercase for comparison
            return text.replace(/\./g, '').toLowerCase();
        }

        function filterLinks(query) {
            const normalizedQuery = normalizeText(query);
            return links.map(category => ({
                category: category.category,
                links: category.links.filter(link =>
                    normalizeText(link.title).includes(normalizedQuery) ||
                    normalizeText(link.description).includes(normalizedQuery)
                )
            })).filter(category => category.links.length > 0);
        }

        // Voice search functionality
        const voiceSearchBtn = document.getElementById('voice-search-btn');
        const searchBar = document.getElementById('search-bar');
        const linksTable = document.getElementById('links-table').getElementsByTagName('tbody')[0];

        let recognition = null;
        try {
            recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.continuous = false;
            recognition.interimResults = false;

            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                searchBar.value = transcript;
                searchBar.dispatchEvent(new Event('input'));
                voiceSearchBtn.classList.remove('listening');
            };

            recognition.onerror = (event) => {
                console.error('Speech recognition error:', event.error);
                voiceSearchBtn.classList.remove('listening');
            };

            recognition.onend = () => {
                voiceSearchBtn.classList.remove('listening');
            };

            voiceSearchBtn.addEventListener('click', () => {
                try {
                    if (voiceSearchBtn.classList.contains('listening')) {
                        recognition.stop();
                        voiceSearchBtn.classList.remove('listening');
                    } else {
                        recognition.start();
                        voiceSearchBtn.classList.add('listening');
                    }
                } catch (error) {
                    console.error('Speech recognition error:', error);
                    alert('Speech recognition is not supported in your browser.');
                }
            });
        } catch (error) {
            console.error('Speech recognition is not supported:', error);
            voiceSearchBtn.style.display = 'none';
        }

        searchBar.addEventListener('input', function() {
            const query = this.value.trim();
            const filteredLinks = filterLinks(query);
            renderLinks(filteredLinks);
        });

        // Initial render
        renderLinks(links);
    </script>
</body>
</html>





































        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-tertiary: #21262d;
            --bg-hover: #30363d;
            --text-primary: #e6edf3;
            --text-secondary: #8b949e;
            --text-muted: #6e7681;
            --accent-blue: #58a6ff;
            --accent-green: #3fb950;
            --accent-orange: #d29922;
            --accent-red: #f85149;
            --accent-purple: #a371f7;
            --accent-cyan: #39c5cf;
            --border-color: #30363d;
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --font-mono: 'JetBrains Mono', monospace;
            --font-serif: 'Source Serif 4', Georgia, serif;
            --highlight-bg: #ffe066;
            --highlight-active: #ff6b6b;
        }
        body.light-mode {
            --bg-primary: #ffffff;
            --bg-secondary: #f6f8fa;
            --bg-tertiary: #eaeef2;
            --bg-hover: #e1e4e8;
            --text-primary: #24292e;
            --text-secondary: #586069;
            --text-muted: #6a737d;
            --accent-blue: #0366d6;
            --accent-green: #28a745;
            --accent-orange: #b08800;
            --accent-red: #cb2431;
            --accent-purple: #6f42c1;
            --accent-cyan: #0184bc;
            --border-color: #e1e4e8;
            --highlight-bg: #fff5b1;
            --highlight-active: #ff6b6b;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { font-family: var(--font-serif); background: var(--bg-primary); color: var(--text-primary); line-height: 1.7; min-height: 100vh; transition: background-color 0.3s ease, color 0.3s ease; }
        .app-container { display: flex; min-height: 100vh; }
        .sidebar { width: 340px; min-width: 340px; background: var(--bg-secondary); border-right: 1px solid var(--border-color); display: flex; flex-direction: column; position: fixed; height: 100vh; z-index: 100; left: 0; top: 0; }
        .sidebar-header { padding: 24px; border-bottom: 1px solid var(--border-color); }
        .sidebar-logo { font-family: var(--font-mono); font-size: 14px; font-weight: 600; color: var(--accent-blue); letter-spacing: 1px; text-transform: uppercase; margin-bottom: 4px; }
        .sidebar-title { font-size: 22px; font-weight: 600; color: var(--text-primary); }
        .nav-container { flex: 1; overflow-y: auto; padding: 16px; }
        .master-toc-container { background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-md); margin-bottom: 16px; overflow: hidden; }
        .master-toc-header { display: flex; align-items: center; padding: 12px 16px; cursor: pointer; transition: background 0.2s ease; user-select: none; border-bottom: 1px solid var(--border-color); }
        .master-toc-header:hover { background: var(--bg-hover); }
        .master-toc-icon { width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; margin-right: 10px; font-size: 14px; transition: transform 0.2s ease; }
        .master-toc-container.open > .master-toc-header .master-toc-icon { transform: rotate(90deg); }
        .master-toc-title { font-family: var(--font-mono); font-size: 13px; font-weight: 600; color: var(--accent-purple); flex: 1; }
        .master-toc-content { display: none; padding: 8px 12px; max-height: 400px; overflow-y: auto; }
        .master-toc-container.open > .master-toc-content { display: block; }
        .master-toc-note { margin-bottom: 12px; }
        .master-toc-note-title { font-family: var(--font-mono); font-size: 12px; font-weight: 600; color: var(--accent-blue); margin-bottom: 4px; display: flex; align-items: center; gap: 6px; cursor: pointer; padding: 4px 8px; border-radius: var(--radius-sm); transition: background 0.2s ease; }
        .master-toc-note-title:hover { background: var(--bg-hover); }
        .master-toc-heading { font-size: 12px; color: var(--text-secondary); padding: 3px 8px 3px 24px; cursor: pointer; border-radius: var(--radius-sm); transition: all 0.2s ease; display: block; text-decoration: none; }
        .master-toc-heading:hover { background: var(--bg-hover); color: var(--text-primary); }
        .master-toc-heading.level-2 { padding-left: 36px; font-size: 11px; }
        .special-nav-item { display: flex; align-items: center; padding: 10px 16px; margin-bottom: 12px; border-radius: var(--radius-md); cursor: pointer; transition: all 0.2s ease; font-family: var(--font-mono); font-size: 13px; }
        .special-nav-item:hover { transform: translateX(4px); }
        .special-nav-item.active { color: var(--bg-primary) !important; }
        .help-item { background: linear-gradient(135deg, rgba(63, 185, 80, 0.1), rgba(163, 113, 247, 0.1)); border: 1px solid var(--accent-green); color: var(--accent-green); }
        .help-item:hover { background: linear-gradient(135deg, rgba(63, 185, 80, 0.2), rgba(163, 113, 247, 0.2)); }
        .help-item.active { background: var(--accent-green); }
        .namaste-item { background: linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(255, 165, 0, 0.1)); border: 1px solid #ff6b6b; color: #ff6b6b; }
        .namaste-item:hover { background: linear-gradient(135deg, rgba(255, 107, 107, 0.2), rgba(255, 165, 0, 0.2)); }
        .namaste-item.active { background: #ff6b6b; }
        .readme-item { background: linear-gradient(135deg, rgba(88, 166, 255, 0.1), rgba(163, 113, 247, 0.1)); border: 1px solid var(--accent-blue); color: var(--accent-blue); }
        .readme-item:hover { background: linear-gradient(135deg, rgba(88, 166, 255, 0.2), rgba(163, 113, 247, 0.2)); }
        .readme-item.active { background: var(--accent-blue); }
        .public-all-item { background: linear-gradient(135deg, rgba(63, 185, 80, 0.1), rgba(57, 197, 207, 0.1)); border: 1px solid var(--accent-green); color: var(--accent-green); }
        .public-all-item:hover { background: linear-gradient(135deg, rgba(63, 185, 80, 0.2), rgba(57, 197, 207, 0.2)); }
        .public-all-item.active { background: var(--accent-green); }
        .special-nav-item-emoji { margin-right: 10px; font-size: 16px; }
        .main-content { flex: 1; margin-left: 340px; display: flex; flex-direction: column; }
        .top-bar { position: sticky; top: 0; background: var(--bg-secondary); border-bottom: 1px solid var(--border-color); padding: 16px 32px; z-index: 50; display: flex; align-items: center; gap: 16px; justify-content: space-between; }
        .top-bar-left { display: flex; align-items: center; gap: 16px; flex: 1; }
        .top-bar-right { display: flex; align-items: center; gap: 12px; }
        .theme-toggle { background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-md); padding: 8px 12px; color: var(--text-secondary); cursor: pointer; transition: all 0.2s ease; font-size: 16px; display: flex; align-items: center; justify-content: center; }
        .theme-toggle:hover { background: var(--bg-hover); color: var(--text-primary); }
        .breadcrumb { font-family: var(--font-mono); font-size: 13px; color: var(--text-secondary); display: flex; align-items: center; gap: 8px; }
        .breadcrumb-item { color: var(--text-muted); }
        .breadcrumb-item.active { color: var(--accent-blue); }
        .breadcrumb-separator { color: var(--text-muted); }
        .search-container { flex: 1; max-width: 500px; margin-left: auto; }
        .search-wrapper { position: relative; display: flex; align-items: center; gap: 8px; }
        .search-input { flex: 1; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-md); padding: 10px 40px 10px 16px; font-family: var(--font-mono); font-size: 13px; color: var(--text-primary); transition: all 0.2s ease; }
        .search-input:focus { outline: none; border-color: var(--accent-blue); box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.15); }
        .search-input::placeholder { color: var(--text-muted); }
        .search-icon { position: absolute; right: 12px; color: var(--text-muted); pointer-events: none; }
        .search-nav { display: flex; align-items: center; gap: 4px; opacity: 0; transition: opacity 0.2s ease; }
        .search-nav.visible { opacity: 1; }
        .search-counter { font-family: var(--font-mono); font-size: 12px; color: var(--text-secondary); padding: 0 8px; min-width: 70px; text-align: center; }
        .search-btn { background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-sm); padding: 6px 10px; cursor: pointer; color: var(--text-secondary); transition: all 0.2s ease; }
        .search-btn:hover { background: var(--bg-hover); color: var(--text-primary); }
        .search-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .clear-search-btn { background: transparent; border: none; color: var(--text-muted); cursor: pointer; padding: 4px; display: none; }
        .clear-search-btn.visible { display: block; }
        .content-area { flex: 1; padding: 32px; max-width: 1200px; }
        .nav-group { margin-bottom: 8px; }
        .nav-dropdown { background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-md); overflow: hidden; }
        .nav-dropdown-header { display: flex; align-items: center; padding: 12px 16px; cursor: pointer; transition: background 0.2s ease; user-select: none; }
        .nav-dropdown-header:hover { background: var(--bg-hover); }
        .nav-dropdown-icon { width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; margin-right: 10px; font-size: 14px; transition: transform 0.2s ease; }
        .nav-dropdown.open > .nav-dropdown-header .nav-dropdown-icon { transform: rotate(90deg); }
        .nav-dropdown-title { font-family: var(--font-mono); font-size: 14px; font-weight: 500; color: var(--text-primary); flex: 1; }
        .nav-dropdown-badge { background: var(--accent-blue); color: var(--bg-primary); font-family: var(--font-mono); font-size: 10px; font-weight: 600; padding: 2px 6px; border-radius: 10px; }
        .nav-dropdown-content { display: none; padding: 4px 8px 8px; }
        .nav-dropdown.open > .nav-dropdown-content { display: block; }
        .nav-dropdown .nav-dropdown { background: transparent; border: none; margin-left: 8px; }
        .nav-dropdown .nav-dropdown .nav-dropdown-header { padding: 8px 12px; border-radius: var(--radius-sm); }
        .nav-item { display: flex; align-items: center; padding: 8px 12px; margin: 2px 0; margin-left: 16px; border-radius: var(--radius-sm); cursor: pointer; transition: all 0.2s ease; font-family: var(--font-mono); font-size: 13px; color: var(--text-secondary); }
        .nav-item:hover { background: var(--bg-hover); color: var(--text-primary); }
        .nav-item.active { background: rgba(88, 166, 255, 0.15); color: var(--accent-blue); }
        .nav-item-emoji { margin-right: 8px; font-size: 14px; }
        .nav-item-name { flex: 1; }
        .nav-item-lock { color: var(--accent-orange); font-size: 12px; }
        .nav-item-unlock { color: var(--accent-green); font-size: 12px; }
        .nav-item.combined { color: var(--accent-purple); font-style: italic; }
        .content-header { margin-bottom: 32px; padding-bottom: 24px; border-bottom: 1px solid var(--border-color); }
        .content-title { font-size: 32px; font-weight: 600; margin-bottom: 8px; display: flex; align-items: center; gap: 12px; }
        .content-title-emoji { font-size: 28px; }
        .content-meta { font-family: var(--font-mono); font-size: 12px; color: var(--text-muted); }
        .toc-container { background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: var(--radius-lg); padding: 20px 24px; margin-bottom: 32px; }
        .toc-title { font-family: var(--font-mono); font-size: 12px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 16px; display: flex; align-items: center; gap: 8px; }
        .toc-list { list-style: none; columns: 2; column-gap: 32px; }
        .toc-list.single-column { columns: 1; }
        .toc-item { margin: 6px 0; break-inside: avoid; }
        .toc-link { color: var(--text-secondary); text-decoration: none; font-size: 14px; transition: color 0.2s ease; display: inline-flex; align-items: center; gap: 8px; }
        .toc-link:hover { color: var(--accent-blue); }
        .toc-link::before { content: '‚Ä∫'; color: var(--text-muted); }
        .toc-item.level-1 { margin-left: 0; font-weight: 500; }
        .toc-item.level-2 { margin-left: 16px; }
        .toc-item.level-3, .toc-item.level-4, .toc-item.level-5, .toc-item.level-6 { display: none; }
        .toc-group-header { font-family: var(--font-mono); font-size: 11px; font-weight: 600; color: var(--accent-purple); text-transform: uppercase; letter-spacing: 1px; margin: 16px 0 8px; padding: 4px 0; border-bottom: 1px solid var(--border-color); list-style: none; }
        .toc-group-header:first-child { margin-top: 0; }
        .heading-toc-link { color: var(--text-muted); text-decoration: none; font-size: 14px; margin-left: 8px; opacity: 0; transition: opacity 0.2s ease; }
        .markdown-body h1:hover .heading-toc-link, .markdown-body h2:hover .heading-toc-link { opacity: 1; }
        .heading-toc-link:hover { color: var(--accent-blue); }
        .markdown-body { color: var(--text-primary); }
        .markdown-body h1 { font-size: 28px; font-weight: 600; margin: 40px 0 16px; padding-bottom: 12px; border-bottom: 1px solid var(--border-color); scroll-margin-top: 100px; }
        .markdown-body h2 { font-size: 22px; font-weight: 600; margin: 32px 0 12px; color: var(--accent-blue); scroll-margin-top: 100px; }
        .markdown-body h3 { font-size: 18px; font-weight: 600; margin: 24px 0 10px; scroll-margin-top: 100px; }
        .markdown-body h4, .markdown-body h5, .markdown-body h6 { font-size: 16px; font-weight: 600; margin: 20px 0 8px; scroll-margin-top: 100px; }
        .markdown-body p { margin: 16px 0; }
        .markdown-body ul, .markdown-body ol { margin: 16px 0; padding-left: 28px; }
        .markdown-body li { margin: 8px 0; }
        .markdown-body code { font-family: var(--font-mono); font-size: 13px; background: var(--bg-tertiary); padding: 2px 6px; border-radius: var(--radius-sm); color: var(--accent-orange); }
        .markdown-body pre { background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-md); padding: 16px; overflow-x: auto; margin: 16px 0; }
        .markdown-body pre code { background: transparent; padding: 0; color: var(--text-primary); }
        .markdown-body blockquote { border-left: 4px solid var(--accent-purple); padding-left: 16px; margin: 16px 0; color: var(--text-secondary); font-style: italic; }
        .markdown-body a { color: var(--accent-blue); text-decoration: none; }
        .markdown-body a:hover { text-decoration: underline; }
        .markdown-body table { width: 100%; border-collapse: collapse; margin: 16px 0; }
        .markdown-body th, .markdown-body td { border: 1px solid var(--border-color); padding: 10px 14px; text-align: left; }
        .markdown-body th { background: var(--bg-tertiary); font-weight: 600; }
        .markdown-body hr { border: none; border-top: 1px solid var(--border-color); margin: 32px 0; }
        .markdown-body tr.filtered-out { display: none; }
        .markdown-body tr.filter-match { background: rgba(88, 166, 255, 0.1); }
        .markdown-body tr.entries-hidden { display: none; }
        .search-highlight { background: var(--highlight-bg); color: #000; padding: 1px 2px; border-radius: 2px; }
        .search-highlight.active { background: var(--highlight-active); color: #fff; box-shadow: 0 0 0 2px var(--highlight-active); }
        .table-filter-wrapper { background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: var(--radius-md); padding: 12px; margin-bottom: 8px; }
        .table-filter-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; }
        .table-filter-title { font-family: var(--font-mono); font-size: 11px; font-weight: 600; color: var(--accent-cyan); text-transform: uppercase; letter-spacing: 1px; }
        .table-filter-toggle { background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-sm); padding: 4px 8px; font-family: var(--font-mono); font-size: 10px; color: var(--text-secondary); cursor: pointer; }
        .table-filter-toggle:hover { background: var(--bg-hover); color: var(--text-primary); }
        .entries-selector-wrapper { display: flex; align-items: center; gap: 6px; }
        .entries-label { font-family: var(--font-mono); font-size: 10px; color: var(--text-secondary); }
        .entries-dropdown { background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-sm); padding: 5px 8px; font-family: var(--font-mono); font-size: 11px; color: var(--text-primary); cursor: pointer; }
        .entries-dropdown:hover { background: var(--bg-hover); }
        .entries-dropdown:focus { outline: none; border-color: var(--accent-blue); }
        .sort-controls-wrapper { display: flex; align-items: center; gap: 6px; flex-wrap: wrap; }
        .sort-label { font-family: var(--font-mono); font-size: 10px; color: var(--text-secondary); }
        .sort-select, .sort-method-select { background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-sm); padding: 5px 8px; font-family: var(--font-mono); font-size: 11px; color: var(--text-primary); cursor: pointer; }
        .sort-select:hover, .sort-method-select:hover { background: var(--bg-hover); }
        .sort-select:focus, .sort-method-select:focus { outline: none; border-color: var(--accent-blue); }
        .sort-function-input { background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-sm); padding: 5px 8px; font-family: var(--font-mono); font-size: 11px; color: var(--text-primary); display: none; }
        .sort-function-input.show { display: block; }
        .sort-function-input:focus { outline: none; border-color: var(--accent-blue); }
        .sort-apply-btn { background: var(--accent-blue); border: none; border-radius: var(--radius-sm); padding: 5px 10px; color: var(--bg-primary); cursor: pointer; font-family: var(--font-mono); font-size: 10px; font-weight: 600; }
        .sort-apply-btn:hover { filter: brightness(1.1); }
        .table-filter-rules { display: flex; flex-direction: column; gap: 6px; }
        .filter-rule { display: flex; align-items: center; gap: 6px; flex-wrap: wrap; }
        .filter-rule select, .filter-rule input { background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-sm); padding: 5px 8px; font-family: var(--font-mono); font-size: 11px; color: var(--text-primary); }
        .filter-rule select:focus, .filter-rule input:focus { outline: none; border-color: var(--accent-blue); }
        .filter-rule select { min-width: 100px; }
        .filter-rule input { flex: 1; min-width: 120px; }
        .filter-rule-remove { background: var(--accent-red); border: none; border-radius: var(--radius-sm); padding: 5px 8px; color: #fff; cursor: pointer; font-size: 11px; }
        .filter-rule-remove:hover { filter: brightness(1.2); }
        .filter-actions { display: flex; gap: 6px; margin-top: 8px; flex-wrap: wrap; }
        .filter-btn { padding: 6px 12px; border-radius: var(--radius-sm); font-family: var(--font-mono); font-size: 11px; cursor: pointer; transition: all 0.2s ease; }
        .filter-add-btn { background: var(--bg-tertiary); border: 1px solid var(--border-color); color: var(--text-secondary); }
        .filter-add-btn:hover { background: var(--bg-hover); color: var(--text-primary); }
        .filter-apply-btn { background: var(--accent-blue); border: none; color: var(--bg-primary); }
        .filter-apply-btn:hover { filter: brightness(1.1); }
        .filter-clear-btn { background: var(--bg-tertiary); border: 1px solid var(--accent-red); color: var(--accent-red); }
        .filter-clear-btn:hover { background: var(--accent-red); color: #fff; }
        .filter-refresh-btn { background: var(--bg-tertiary); border: 1px solid var(--accent-cyan); color: var(--accent-cyan); padding: 6px 12px; border-radius: var(--radius-sm); font-family: var(--font-mono); font-size: 11px; cursor: pointer; transition: all 0.2s ease; }
        .filter-refresh-btn:hover { background: var(--accent-cyan); color: var(--bg-primary); }
        .refresh-ribbon { display: flex; gap: 6px; margin-top: 8px; flex-wrap: wrap; align-items: center; }
        .table-copy-wrapper { display: flex; justify-content: flex-end; margin-top: 8px; position: relative; }
        .copy-table-btn { background: var(--bg-tertiary); border: 1px solid var(--border-color); color: var(--text-secondary); padding: 6px 12px; border-radius: var(--radius-sm); font-family: var(--font-mono); font-size: 11px; cursor: pointer; transition: all 0.2s ease; display: flex; align-items: center; gap: 6px; }
        .copy-table-btn:hover { background: var(--bg-hover); color: var(--text-primary); }
        .copy-table-btn.copied { background: var(--accent-green); border-color: var(--accent-green); color: #fff; }
        .copy-formats-dropdown { position: absolute; top: 100%; right: 0; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: var(--radius-md); box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 100; min-width: 150px; display: none; margin-top: 4px; }
        .copy-formats-dropdown.open { display: block; }
        .copy-format-item { padding: 8px 12px; cursor: pointer; transition: all 0.2s ease; border-bottom: 1px solid var(--border-color); font-family: var(--font-mono); font-size: 11px; color: var(--text-secondary); }
        .copy-format-item:last-child { border-bottom: none; }
        .copy-format-item:hover { background: var(--bg-tertiary); color: var(--text-primary); }
        .copy-format-item.copied { background: var(--accent-green); color: #fff; border-bottom-color: var(--accent-green); }
        /* Column Selection Styles */
        .column-selector-wrapper { position: relative; display: flex; align-items: center; }
        .column-selector-btn { background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-sm); padding: 6px 10px; color: var(--text-secondary); cursor: pointer; transition: all 0.2s ease; font-family: var(--font-mono); font-size: 11px; display: flex; align-items: center; gap: 6px; }
        .column-selector-btn:hover { background: var(--bg-hover); color: var(--text-primary); }
        .column-selector-dropdown { position: absolute; top: 100%; right: 0; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: var(--radius-md); box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 101; min-width: 200px; display: none; margin-top: 4px; max-height: 400px; overflow-y: auto; }
        .column-selector-dropdown.open { display: block; }
        .column-selector-header { padding: 8px 12px; border-bottom: 1px solid var(--border-color); display: flex; align-items: center; gap: 8px; background: var(--bg-tertiary); font-weight: 600; font-size: 11px; color: var(--text-primary); }
        .column-select-all { display: flex; align-items: center; gap: 6px; cursor: pointer; flex: 1; user-select: none; }
        .column-select-all input[type="checkbox"] { cursor: pointer; }
        .column-select-all span { font-size: 11px; }
        .column-item { display: flex; align-items: center; padding: 8px 12px; cursor: pointer; transition: background 0.2s ease; border-bottom: 1px solid var(--border-color); }
        .column-item:hover { background: var(--bg-hover); }
        .column-item:last-child { border-bottom: none; }
        .column-item input[type="checkbox"] { cursor: pointer; margin-right: 8px; }
        .column-item label { flex: 1; cursor: pointer; font-size: 12px; color: var(--text-secondary); user-select: none; display: flex; align-items: center; }
        .column-item input[type="checkbox"]:checked + label { color: var(--accent-blue); font-weight: 500; }
        .column-selector-footer { padding: 8px 12px; border-top: 1px solid var(--border-color); background: var(--bg-tertiary); display: flex; gap: 6px; font-size: 10px; color: var(--text-muted); }
        /* Hide columns in table display */
        .markdown-body table th.hidden-column, .markdown-body table td.hidden-column { display: none; }
        .media-gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; margin: 20px 0; }
        .media-item { background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: var(--radius-lg); overflow: hidden; transition: all 0.3s ease; cursor: pointer; }
        .media-item:hover { border-color: var(--accent-blue); box-shadow: 0 4px 12px rgba(88, 166, 255, 0.1); }
        .media-item-thumbnail { width: 100%; aspect-ratio: 16/9; background: var(--bg-tertiary); display: flex; align-items: center; justify-content: center; font-size: 48px; color: var(--text-muted); overflow: hidden; position: relative; }
        .media-item-thumbnail img, .media-item-thumbnail video { width: 100%; height: 100%; object-fit: cover; }
        .media-item-content { padding: 16px; }
        .media-item-title { font-size: 16px; font-weight: 600; color: var(--text-primary); margin-bottom: 8px; }
        .media-item-caption { font-size: 14px; color: var(--text-secondary); margin-bottom: 8px; line-height: 1.4; }
        .media-item-subcaption { font-size: 12px; color: var(--text-muted); margin-bottom: 12px; }
        .media-item-lock { display: flex; align-items: center; gap: 8px; padding: 8px; background: rgba(255, 107, 107, 0.1); border-radius: var(--radius-sm); color: var(--accent-red); font-size: 12px; }
        .media-item-lock::before { content: 'üîí'; }
        .media-gallery-header { font-family: var(--font-mono); font-size: 12px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 16px; }
        .filter-logic-select { background: var(--accent-purple) !important; color: #fff !important; border: none !important; font-weight: 600; }
        .filter-results { font-family: var(--font-mono); font-size: 10px; color: var(--text-muted); margin-top: 6px; }
        .password-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.8); display: flex; align-items: center; justify-content: center; z-index: 1000; opacity: 0; visibility: hidden; transition: all 0.3s ease; }
        .password-overlay.visible { opacity: 1; visibility: visible; }
        .password-modal { background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: var(--radius-lg); padding: 32px; width: 100%; max-width: 400px; transform: translateY(20px); transition: transform 0.3s ease; }
        .password-overlay.visible .password-modal { transform: translateY(0); }
        .password-icon { font-size: 48px; text-align: center; margin-bottom: 16px; }
        .password-title { font-size: 20px; font-weight: 600; text-align: center; margin-bottom: 8px; }
        .password-subtitle { font-family: var(--font-mono); font-size: 13px; color: var(--text-secondary); text-align: center; margin-bottom: 24px; }
        .password-input-wrapper { margin-bottom: 16px; }
        .password-input { width: 100%; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-md); padding: 12px 16px; font-family: var(--font-mono); font-size: 14px; color: var(--text-primary); text-align: center; letter-spacing: 4px; }
        .password-input:focus { outline: none; border-color: var(--accent-blue); }
        .password-error { color: var(--accent-red); font-size: 13px; text-align: center; margin-bottom: 16px; display: none; }
        .password-error.visible { display: block; }
        .password-buttons { display: flex; gap: 12px; }
        .password-btn { flex: 1; padding: 12px; border-radius: var(--radius-md); font-family: var(--font-mono); font-size: 13px; font-weight: 500; cursor: pointer; transition: all 0.2s ease; }
        .password-btn-cancel { background: var(--bg-tertiary); border: 1px solid var(--border-color); color: var(--text-secondary); }
        .password-btn-cancel:hover { background: var(--bg-hover); color: var(--text-primary); }
        .password-btn-submit { background: var(--accent-blue); border: none; color: var(--bg-primary); }
        .password-btn-submit:hover { filter: brightness(1.1); }
        .back-to-top { position: fixed; bottom: 32px; right: 32px; width: 48px; height: 48px; background: var(--accent-blue); border: none; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; color: var(--bg-primary); font-size: 20px; box-shadow: 0 8px 24px rgba(0,0,0,0.5); opacity: 0; visibility: hidden; transform: translateY(20px); transition: all 0.3s ease; z-index: 90; }
        .back-to-top.visible { opacity: 1; visibility: visible; transform: translateY(0); }
        .back-to-top:hover { transform: translateY(-4px); }
        .floating-menu-btn { position: fixed; top: 20px; left: 20px; width: 48px; height: 48px; background: var(--accent-blue); border: none; border-radius: 50%; cursor: pointer; display: none; align-items: center; justify-content: center; color: var(--bg-primary); font-size: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 95; transition: all 0.3s ease; }
        .floating-menu-btn:hover { transform: scale(1.05); background: var(--accent-purple); }
        .floating-menu-btn.active { background: var(--accent-green); }
        .loading-container { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 64px; color: var(--text-secondary); }
        .loading-spinner { width: 40px; height: 40px; border: 3px solid var(--border-color); border-top-color: var(--accent-blue); border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 16px; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .empty-state { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 64px; text-align: center; }
        .empty-state-icon { font-size: 64px; margin-bottom: 16px; opacity: 0.5; }
        .empty-state-title { font-size: 20px; font-weight: 600; margin-bottom: 8px; }
        .empty-state-text { color: var(--text-secondary); font-size: 14px; }
        .pyodide-loading { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: var(--bg-primary); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2000; transition: opacity 0.5s ease; }
        .pyodide-loading.hidden { opacity: 0; pointer-events: none; }
        .pyodide-logo { font-size: 64px; margin-bottom: 24px; animation: pulse 2s ease-in-out infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        .pyodide-text { font-family: var(--font-mono); font-size: 14px; color: var(--text-secondary); margin-bottom: 24px; }
        .pyodide-progress { width: 200px; height: 4px; background: var(--bg-tertiary); border-radius: 2px; overflow: hidden; }
        .pyodide-progress-bar { height: 100%; background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple)); width: 0%; transition: width 0.3s ease; }
        /* Table cell truncation styles */
        .table-cell-truncated { max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; cursor: pointer; position: relative; transition: all 0.2s ease; }
        .table-cell-truncated:hover { background: var(--bg-hover); }
        .truncation-toggle { background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-md); padding: 8px 12px; color: var(--text-secondary); cursor: pointer; transition: all 0.2s ease; font-size: 12px; display: flex; align-items: center; gap: 8px; }
        .truncation-toggle:hover { background: var(--bg-hover); color: var(--text-primary); }
        .truncation-toggle.active { background: var(--accent-blue); border-color: var(--accent-blue); color: var(--bg-primary); }
        .pdf-download-btn { background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--radius-md); padding: 8px 12px; color: var(--text-secondary); cursor: pointer; transition: all 0.2s ease; font-size: 13px; display: flex; align-items: center; gap: 6px; font-family: var(--font-mono); }
        .pdf-download-btn:hover { background: var(--bg-hover); color: var(--text-primary); }
        .pdf-download-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .pdf-download-btn.downloading { background: var(--accent-blue); border-color: var(--accent-blue); color: var(--bg-primary); }
        /* Responsive Design - Touch Devices */
        @media (max-width: 1200px) {
            .sidebar { width: 280px; min-width: 280px; }
            .main-content { margin-left: 280px; }
            .content-area { padding: 24px; max-width: 100%; }
            .toc-list { columns: 1; }
        }
        @media (max-width: 1024px) {
            .sidebar { width: 260px; min-width: 260px; }
            .main-content { margin-left: 260px; }
            .content-area { padding: 20px; }
            .top-bar { padding: 12px 20px; gap: 12px; }
        }
        @media (max-width: 768px) {
            /* Layout adjustments */
            .sidebar { transform: translateX(-100%); transition: transform 0.3s ease; width: 280px; min-width: 280px; left: 0; top: 0; }
            .sidebar.open { transform: translateX(0); z-index: 200; box-shadow: 2px 0 8px rgba(0, 0, 0, 0.3); }
            .main-content { margin-left: 0; }
            .content-area { padding: 16px; max-width: 100%; }
            .top-bar { padding: 12px 16px; gap: 8px; }
            .top-bar-left { gap: 12px; }
            .top-bar-right { gap: 8px; }
            
            /* Search container - hide on mobile, show toggle */
            .search-container { display: none; }
            .mobile-menu-btn { display: none; } /* Hide the button in top-bar */
            .floating-menu-btn { display: flex; } /* Show floating button on mobile */
            
            /* Navigation adjustments */
            .master-toc-container { margin-bottom: 8px; }
            .special-nav-item { padding: 12px; min-height: 44px; }
            .nav-item { padding: 10px 12px; min-height: 44px; margin-left: 12px; }
            .nav-dropdown-header { padding: 10px 12px; min-height: 44px; }
            
            /* Content adjustments */
            .toc-list { columns: 1; }
            .toc-container { padding: 16px; margin-bottom: 24px; }
            .content-title { font-size: 24px; margin-bottom: 4px; }
            .content-header { margin-bottom: 20px; padding-bottom: 16px; }
            
            /* Markdown body */
            .markdown-body h1 { font-size: 22px; margin: 24px 0 12px; }
            .markdown-body h2 { font-size: 18px; margin: 20px 0 10px; }
            .markdown-body h3 { font-size: 16px; margin: 16px 0 8px; }
            .markdown-body h4, .markdown-body h5, .markdown-body h6 { font-size: 14px; margin: 12px 0 6px; }
            .markdown-body p { margin: 12px 0; font-size: 16px; }
            .markdown-body code { font-size: 12px; padding: 2px 4px; }
            .markdown-body pre { padding: 12px; margin: 12px 0; overflow-x: auto; -webkit-overflow-scrolling: touch; }
            
            /* Tables */
            .markdown-body table { font-size: 13px; margin: 12px 0; }
            .markdown-body th, .markdown-body td { padding: 8px 10px; }
            
            /* Buttons and controls */
            .truncation-toggle { min-height: 44px; padding: 10px; font-size: 12px; }
            .theme-toggle { min-height: 44px; min-width: 44px; padding: 8px; }
            .pdf-download-btn { min-height: 44px; padding: 10px; font-size: 12px; }
            .search-btn { min-height: 44px; min-width: 44px; padding: 10px; }
            
            /* Filter and table controls */
            .table-filter-wrapper { padding: 10px; margin-bottom: 8px; }
            .filter-rule { gap: 8px; }
            .filter-rule select, .filter-rule input { padding: 8px 6px; font-size: 12px; min-height: 40px; }
            .filter-btn { min-height: 40px; padding: 8px 10px; font-size: 11px; }
            .copy-table-btn { min-height: 40px; padding: 8px 10px; }
            .column-selector-btn { min-height: 40px; padding: 8px 10px; }
            .column-selector-dropdown { max-height: 300px; }
            
            /* Modal adjustments */
            .password-modal { padding: 24px; max-width: 90%; }
            .password-input { padding: 12px; font-size: 16px; }
            .password-btn { padding: 12px; min-height: 44px; font-size: 14px; }
            
            /* Media gallery */
            .media-gallery { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 12px; }
            .media-item-title { font-size: 14px; }
            .media-item-caption { font-size: 12px; }
        }
        @media (max-width: 600px) {
            /* Extra small screens */
            .sidebar { width: 100%; max-width: 280px; }
            .sidebar-header { padding: 16px; }
            .sidebar-title { font-size: 13px; }
            .sidebar-logo { font-size: 12px; }
            
            .content-area { padding: 12px; }
            .top-bar { padding: 10px 12px; }
            .breadcrumb { font-size: 11px; display: none; }
            
            /* Content */
            .content-title { font-size: 20px; gap: 8px; }
            .content-title-emoji { font-size: 24px; }
            .content-meta { font-size: 10px; }
            
            /* Typography */
            .markdown-body h1 { font-size: 18px; margin: 16px 0 8px; padding-bottom: 8px; }
            .markdown-body h2 { font-size: 16px; margin: 12px 0 6px; }
            .markdown-body h3 { font-size: 14px; margin: 10px 0 4px; }
            .markdown-body p { font-size: 14px; margin: 8px 0; }
            .markdown-body ul, .markdown-body ol { padding-left: 20px; margin: 8px 0; }
            .markdown-body li { margin: 4px 0; }
            
            /* Tables - horizontal scroll */
            .markdown-body table { font-size: 12px; display: block; overflow-x: auto; -webkit-overflow-scrolling: touch; white-space: nowrap; }
            .markdown-body th, .markdown-body td { padding: 6px 8px; }
            
            /* Buttons */
            .truncation-toggle { padding: 8px; font-size: 11px; }
            .pdf-download-btn { padding: 8px 10px; font-size: 11px; }
            
            /* TOC */
            .toc-container { padding: 12px; margin-bottom: 16px; }
            .toc-title { font-size: 10px; margin-bottom: 8px; }
            .toc-link { font-size: 12px; }
        }
        @media (max-width: 480px) {
            /* Phones */
            .main-content { margin-left: 0; }
            .content-area { padding: 8px; }
            .top-bar { padding: 8px 10px; gap: 4px; }
            .top-bar-right { gap: 4px; }
            
            /* Hide less important buttons on very small screens */
            .pdf-download-btn span:last-child { display: none; }
            .pdf-download-btn { padding: 8px; }
            
            .content-title { font-size: 18px; margin-bottom: 2px; }
            .content-title-emoji { font-size: 20px; }
            
            /* Navigation */
            .special-nav-item { font-size: 12px; padding: 10px; }
            .nav-item { font-size: 12px; padding: 8px; margin-left: 8px; }
            
            /* Markdown */
            .markdown-body h1 { font-size: 16px; margin: 12px 0 6px; }
            .markdown-body h2 { font-size: 14px; margin: 10px 0 4px; }
            .markdown-body h3 { font-size: 12px; margin: 8px 0 2px; }
            .markdown-body p { font-size: 13px; margin: 6px 0; line-height: 1.5; }
            .markdown-body code { font-size: 11px; }
            .markdown-body pre { padding: 8px; font-size: 11px; }
            
            .markdown-body table { font-size: 11px; }
            .markdown-body th, .markdown-body td { padding: 4px 6px; }
            
            /* TOC */
            .toc-list { columns: 1; }
            .toc-item { margin: 3px 0; }
            .toc-link { font-size: 11px; }
            
            /* Blocks */
            .markdown-body blockquote { padding-left: 12px; margin: 8px 0; }
            .markdown-body hr { margin: 16px 0; }
        }
        @media (touch-enabled), (hover: none) {
            /* Touch-friendly adjustments */
            .nav-item:hover { transform: none; background: var(--bg-hover); }
            .special-nav-item:hover { transform: none; background: var(--bg-hover); opacity: 0.8; }
            .toc-link:hover { background: var(--bg-tertiary); }
            .markdown-body a { padding: 2px 2px; border-radius: 2px; }
            .markdown-body a:active { background: var(--highlight-bg); }
            .search-btn { -webkit-user-select: none; user-select: none; }
            .copy-table-btn { -webkit-user-select: none; user-select: none; }
        }
        .mobile-menu-btn { display: none; background: transparent; border: none; color: var(--text-primary); font-size: 24px; cursor: pointer; padding: 4px; }
        /* Protection styles: disable selection, image/link interaction and printing for protected content */
        .nav-item-protect { margin-left: 6px; font-size: 12px; color: var(--accent-purple); }
        .protected-content { user-select: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; }
        .protected-content img, .protected-content video { pointer-events: none; -webkit-user-drag: none; }
        .protected-content a { pointer-events: none; color: inherit; text-decoration: none; }
        .protected-print-notice { display: none; font-family: var(--font-mono); font-size: 13px; color: var(--accent-red); padding: 8px 0; }
        @media print { 
            .protected-content { display: none !important; } 
            .protected-print-notice { display: block !important; }
            .table-filter-wrapper { display: none !important; }
            .top-bar { display: none !important; }
            .sidebar { display: none !important; }
            .main-content { margin-left: 0 !important; }
        }
    </style>
</head>
<body>
    <div class="pyodide-loading" id="pyodideLoading">
        <div class="pyodide-logo">üìö</div>
        <div class="pyodide-text">Initializing Markdown Engine...</div>
        <div class="pyodide-progress"><div class="pyodide-progress-bar" id="pyodideProgress"></div></div>
    </div>
    <div class="password-overlay" id="passwordOverlay">
        <div class="password-modal">
            <div class="password-icon">üîê</div>
            <div class="password-title">Protected Note</div>
            <div class="password-subtitle" id="passwordNoteTitle">Enter password to unlock</div>
            <div class="password-input-wrapper"><input type="password" class="password-input" id="passwordInput" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"></div>
            <div class="password-error" id="passwordError">Incorrect password. Please try again.</div>
            <div class="password-buttons">
                <button class="password-btn password-btn-cancel" id="passwordCancel">Cancel</button>
                <button class="password-btn password-btn-submit" id="passwordSubmit">Unlock</button>
            </div>
        </div>
    </div>
    <div class="app-container">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">üìñ Notes</div>
                <div class="sidebar-title">Compiled by: <br>‡§∂‡§ø‡§µ‡§™‡•ç‡§∞‡§∏‡§æ‡§¶ ‡§Ü‡§ö‡§æ‡§∞‡•ç‡§Ø<br>M.Sc;LL.M <br>(‡§µ‡§∏‡§®‡•ç‡§§‡§™‡§û‡•ç‡§ö‡§Æ‡§ø,‡•®‡•¶‡•Æ‡•®)</div>
            </div>
            <nav class="nav-container" id="navContainer">
                <div class="special-nav-item help-item" id="helpItem" style="display: none;"><span class="special-nav-item-emoji">‚ùì</span><span>Help</span></div>
                <div class="special-nav-item namaste-item" id="namasteItem" style="display: none;"><span class="special-nav-item-emoji">üôè</span><span>Namaste</span></div>
                <div class="special-nav-item readme-item" id="readmeItem" style="display: none;"><span class="special-nav-item-emoji">üìò</span><span>README.md</span></div>
                <div class="special-nav-item public-all-item" id="publicAllItem"><span class="special-nav-item-emoji">üåê</span><span>Public All Notes</span></div>
                <div class="master-toc-container" id="masterTocContainer">
                    <div class="master-toc-header" id="masterTocHeader"><span class="master-toc-icon">‚ñ∂</span><span class="master-toc-title">üìã Master TOC</span></div>
                    <div class="master-toc-content" id="masterTocContent"></div>
                </div>
            </nav>
        </aside>
        <main class="main-content">
            <header class="top-bar">
                <div class="top-bar-left">
                    <button class="mobile-menu-btn" id="mobileMenuBtn">‚ò∞</button>
                    <div class="breadcrumb" id="breadcrumb"><span class="breadcrumb-item">Notes</span></div>
                </div>
                <div class="search-container">
                    <div class="search-wrapper">
                        <input type="text" class="search-input" id="searchInput" placeholder="Search in content... (Ctrl+F)">
                        <span class="search-icon">üîç</span>
                        <button class="clear-search-btn" id="clearSearch">‚úï</button>
                    </div>
                    <div class="search-nav" id="searchNav">
                        <button class="search-btn" id="searchPrev" disabled>‚ñ≤</button>
                        <span class="search-counter" id="searchCounter">0 / 0</span>
                        <button class="search-btn" id="searchNext" disabled>‚ñº</button>
                    </div>
                </div>
                <div class="top-bar-right">
                    <button class="pdf-download-btn" id="pdfDownloadBtn" title="Download as PDF">üì• PDF</button>
                    <button class="truncation-toggle" id="truncationToggle" title="Toggle table cell truncation">üìã Full Text</button>
                    <button class="theme-toggle" id="themeToggle" title="Toggle light/dark mode">üåô</button>
                </div>
            </header>
            <article class="content-area" id="contentArea">
                <div class="empty-state">
                    <div class="empty-state-icon">üìÑ</div>
                    <div class="empty-state-title">Select a Note</div>
                    <div class="empty-state-text">Choose a note from the sidebar to view its content</div>
                </div>
            </article>
        </main>
    </div>
    <button class="floating-menu-btn" id="floatingMenuBtn">‚ò∞</button>
    <button class="back-to-top" id="backToTop">‚¨Ü</button>
    <script>
// ========================================
// Sample Data
// ========================================

window.helpMeta = { name: "Help", emoji: "‚ùì", password: null, protection: "NO" };
window.namasteMeta = { name: "Namaste", emoji: "üôè", password: null, protection: "NO" };
window.readmeMeta = { name: "README", emoji: "üìò", password: null, protection: "NO" };

window.groupUMeta = { name: "JavaScript & React", emoji: "üü®", description: "Frontend docs" };
window.groupVMeta = { name: "Python & Data", emoji: "üêç", description: "Backend docs" };
window.groupWMeta = { name: "Nepali Content", emoji: "üá≥üáµ", description: "‡§®‡•á‡§™‡§æ‡§≤‡•Ä" };
window.unitU1Meta = { name: "JS Fundamentals", emoji: "üìó", description: "Core JS" };
window.unitU2Meta = { name: "React Development", emoji: "‚öõÔ∏è", description: "React" };
window.unitV1Meta = { name: "Python Basics", emoji: "üêç", description: "Python" };
window.unitV2Meta = { name: "Data Science", emoji: "üìä", description: "Data" };
window.unitW1Meta = { name: "‡§®‡•á‡§™‡§æ‡§≤‡•Ä", emoji: "üìú", description: "Nepali" };
window.combinedU0Meta = { name: "All JS & React", emoji: "üü®", description: "All Group U" };
window.combinedV0Meta = { name: "All Python", emoji: "üêç", description: "All Group V" };
window.combinedW0Meta = { name: "All Nepali", emoji: "üá≥üáµ", description: "All Group W" };
window.combinedU01Meta = { name: "JS Collection", emoji: "üìó", description: "Unit U1" };
window.combinedU02Meta = { name: "React Collection", emoji: "‚öõÔ∏è", description: "Unit U2" };
window.combinedV01Meta = { name: "Python Collection", emoji: "üêç", description: "Unit V1" };
window.combinedV02Meta = { name: "Data Collection", emoji: "üìä", description: "Unit V2" };
window.publicAllMeta = { name: "Public All Notes", emoji: "üåê", description: "All public notes" };

window.noteU11Content = `# Introduction to JavaScript\n\n## Overview\nJavaScript is versatile.\n\n## Features Table\n\n| Feature | Type | Supported |\n|---------|------|----------|\n| Variables | let/const | Yes ‡•ß‡•® ‡§Æ‡§æ‡§ò, ‡§ï‡§æ‡§†‡§Æ‡§æ‡§°‡•å‡§Ç ‡•§ ‡§∏‡•Å‡§®‡§∏‡§∞‡•Ä-‡•ß ‡§ï‡§æ ‡§â‡§Æ‡•ç‡§Æ‡•á‡§¶‡§µ‡§æ‡§∞ ‡§π‡§∞‡•ç‡§ï ‡§∏‡§æ‡§Æ‡•ç‡§™‡§æ‡§ô‡§µ‡§ø‡§∞‡•Å‡§¶‡•ç‡§ß ‡§®‡§ø‡§∞‡•ç‡§µ‡§æ‡§ö‡§® ‡§Ü‡§Ø‡•ã‡§ó‡§Æ‡§æ ‡§â‡§ú‡•Å‡§∞‡•Ä ‡§™‡§∞‡•á‡§ï‡•ã ‡§õ ‡•§ ‡§∂‡•ç‡§∞‡§Æ ‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§ø ‡§™‡§æ‡§∞‡•ç‡§ü‡•Ä‡§ï‡§æ ‡§Ö‡§ß‡•ç‡§Ø‡§ï‡•ç‡§∑‡§∏‡§Æ‡•á‡§§ ‡§∞‡§π‡•á‡§ï‡§æ ‡§∏‡§æ‡§Æ‡•ç‡§™‡§æ‡§ô‡§≤‡•á ‡§ö‡•Å‡§®‡§æ‡§µ‡•Ä ‡§™‡•ç‡§∞‡§ö‡§æ‡§∞‡§™‡•ç‡§∞‡§ö‡§æ‡§∞‡§Æ‡§æ ‡§¨‡§æ‡§≤‡§¨‡§æ‡§≤‡§ø‡§ï‡§æ‡§ï‡•ã ‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó ‡§ó‡§∞‡•á‡§ï‡•ã ‡§Ü‡§∞‡•ã‡§™‡§Æ‡§æ ‡§â‡§ú‡•Å‡§∞‡•Ä ‡§™‡§∞‡•á‡§ï‡•ã ‡§π‡•ã ‡•§ <br>‡•ß‡•® ‡§Æ‡§æ‡§ò, ‡§ï‡§æ‡§†‡§Æ‡§æ‡§°‡•å‡§Ç ‡•§ ‡§∏‡•Å‡§®‡§∏‡§∞‡•Ä-‡•ß ‡§ï‡§æ ‡§â‡§Æ‡•ç‡§Æ‡•á‡§¶‡§µ‡§æ‡§∞ ‡§π‡§∞‡•ç‡§ï ‡§∏‡§æ‡§Æ‡•ç‡§™‡§æ‡§ô‡§µ‡§ø‡§∞‡•Å‡§¶‡•ç‡§ß ‡§®‡§ø‡§∞‡•ç‡§µ‡§æ‡§ö‡§® ‡§Ü‡§Ø‡•ã‡§ó‡§Æ‡§æ ‡§â‡§ú‡•Å‡§∞‡•Ä ‡§™‡§∞‡•á‡§ï‡•ã ‡§õ ‡•§ ‡§∂‡•ç‡§∞‡§Æ ‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§ø ‡§™‡§æ‡§∞‡•ç‡§ü‡•Ä‡§ï‡§æ ‡§Ö‡§ß‡•ç‡§Ø‡§ï‡•ç‡§∑‡§∏‡§Æ‡•á‡§§ ‡§∞‡§π‡•á‡§ï‡§æ ‡§∏‡§æ‡§Æ‡•ç‡§™‡§æ‡§ô‡§≤‡•á ‡§ö‡•Å‡§®‡§æ‡§µ‡•Ä ‡§™‡•ç‡§∞‡§ö‡§æ‡§∞‡§™‡•ç‡§∞‡§ö‡§æ‡§∞‡§Æ‡§æ ‡§¨‡§æ‡§≤‡§¨‡§æ‡§≤‡§ø‡§ï‡§æ‡§ï‡•ã ‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó ‡§ó‡§∞‡•á‡§ï‡•ã ‡§Ü‡§∞‡•ã‡§™‡§Æ‡§æ ‡§â‡§ú‡•Å‡§∞‡•Ä ‡§™‡§∞‡•á‡§ï‡•ã ‡§π‡•ã ‡•§|\n| Functions | Arrow | Yes |\n| Classes | ES6 | Yes |\n| Modules | ESM | Yes |\n| Async | Promise | Yes |`;
window.noteU11Meta = { name: "JS Basics", emoji: "üìí", password: null, protection: "NO" };

window.noteU12Content = `# Advanced JavaScript\n\n## Closures\nClosures capture scope.\n\n## Performance\n\n| Method | Speed | Memory |\n|--------|-------|--------|\n| Callbacks | Fast | Low |\n| Promises | Medium | Medium |\n| Async/Await | Medium | Medium |`;
window.noteU12Meta = { name: "JS Advanced", emoji: "üìó", password: null, protection: "YES" };

window.noteU13Content = `# Security Patterns (Locked)\n\n## Auth Table\n\n| Method | Level |\n|--------|-------|\n| JWT | High |\n| OAuth | Very High |`;
window.noteU13Meta = { name: "Security", emoji: "üîí", password: "secret123", protection: "YES" };

window.noteU21Content = `# React Fundamentals\n\n## Components\nBuilding blocks of React.\n\n## Comparison\n\n| Feature | Class | Functional |\n|---------|-------|------------|\n| State | this.state | useState |\n| Lifecycle | methods | useEffect |\n\n## Resources\n\n| Resource | Link | Type |\n|----------|------|------|\n| Official Docs | https://react.dev | External |\n| Tutorial | https://react.dev/learn | External |\n| Community | https://github.com/facebook/react | Repository |`;
window.noteU21Meta = { name: "React Basics", emoji: "‚öõÔ∏è", password: null, protection: "YES" };

window.noteU22Content = `# State Management\n\n## Solutions\n\n| Library | Size | Learning |\n|---------|------|----------|\n| Redux | Large | Steep |\n| MobX | Medium | Medium |\n| Zustand | Small | Easy |\n\n## Gallery\n\n| Title | Caption | Subcaption | URL |\n|-------|---------|------------|-----|\n| React Logo | Official React brand | Modern UI library | https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/React-icon.svg/1024px-React-icon.svg.png |\n| Vue Framework | Progressive framework | Alternative to React | https://vuejs.org/images/logo.png |\n| Angular Icon | Google framework | Complete solution | https://angular.io/assets/images/logos/angular/angular.svg |`;
window.noteU22Meta = { name: "State Mgmt", emoji: "üîÑ", password: "123", protection: "YES" };

window.noteV11Content = `# Python Basics\n\n## Comparison\n\n| Feature | Python | Java |\n|---------|--------|------|\n| Typing | Dynamic | Static |\n| Syntax | Clean | Verbose |`;
window.noteV11Meta = { name: "Python Intro", emoji: "üêç", password: null, protection: "NO" };

window.noteV12Content = `# Python OOP\n\n## Concepts\n\n| Concept | Description |\n|---------|-------------|\n| Encapsulation | Data hiding |\n| Inheritance | Code reuse |`;
window.noteV12Meta = { name: "Python OOP", emoji: "üéØ", password: null, protection: "NO" };

window.noteV13Content = `# API Keys (Locked)\n\n## Keys\n\n| Env | Level |\n|-----|-------|\n| Prod | Full |`;
window.noteV13Meta = { name: "API Keys", emoji: "üîê", password: "123", protection: "YES" };

window.noteV21Content = `# Data Science\n\n## Libraries\n\n| Library | Purpose | Performance |\n|---------|---------|-------------|\n| NumPy | Arrays | Excellent |\n| Pandas | DataFrames | Good |\n| Matplotlib | Plotting | Good |`;
window.noteV21Meta = { name: "Data Science", emoji: "üìä", password: null, protection: "NO" };

window.noteW11Content = `# ‡§®‡•á‡§™‡§æ‡§≤‡•Ä ‡§≠‡§æ‡§∑‡§æ\n\n## ‡§∂‡§ø‡§µ ‡§ï‡•ã ‡§ï‡§•‡§æ\n‡§∂‡§ø‡§µ ‡§¶‡•á‡§µ‡§§‡§æ ‡§π‡•Å‡§®‡•ç‡•§ ‡§∏‡•Ä‡§µ ‡§™‡§®‡§ø ‡§≠‡§®‡§ø‡§®‡•ç‡§õ‡•§\n\n## ‡§∂‡§¨‡•ç‡§¶ ‡§§‡§æ‡§≤‡§ø‡§ï‡§æ\n\n| ‡§∂‡§¨‡•ç‡§¶ | ‡§Ö‡§∞‡•ç‡§• |\n|------|------|\n| ‡§∂‡§ø‡§µ | ‡§¶‡•á‡§µ‡§§‡§æ |\n| ‡§µ‡§ø‡§ï‡§æ‡§∏ | Progress |`;
window.noteW11Meta = { name: "‡§®‡•á‡§™‡§æ‡§≤‡•Ä ‡§≠‡§æ‡§∑‡§æ", emoji: "üá≥üáµ", password: null, protection: "NO" };

window.noteW12Content = `# ‡§¶‡•á‡§µ‡§®‡§æ‡§ó‡§∞‡•Ä\n\n## ‡§µ‡§∞‡•ç‡§£‡§Æ‡§æ‡§≤‡§æ\n‡§ï ‡§ñ ‡§ó ‡§ò ‡§ô\n\n## ‡§§‡§æ‡§≤‡§ø‡§ï‡§æ\n\n| ‡§µ‡§∞‡•ç‡§ó | ‡§µ‡§∞‡•ç‡§£‡§π‡§∞‡•Ç |\n|------|--------|\n| ‡§ï ‡§µ‡§∞‡•ç‡§ó | ‡§ï ‡§ñ ‡§ó ‡§ò ‡§ô |`;
window.noteW12Meta = { name: "‡§¶‡•á‡§µ‡§®‡§æ‡§ó‡§∞‡•Ä", emoji: "üìú", password: null, protection: "NO" };
    </script>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script>
// ========================================
// Application State
// ========================================
const AppState = {
    pyodide: null, notes: new Map(), groups: new Map(), groupMeta: new Map(),
    unitMeta: new Map(), combinedMeta: new Map(), currentNote: null,
    unlockedNotes: new Set(), searchMatches: [], currentMatchIndex: -1, currentProtected: false,
    originalContent: '', hasReadme: false, combinedViewHeadingMap: {},
    headingIdMap: {}, headingCounter: 0, truncateTableCells: true, allTableCells: []
};

// ========================================
// PDF Download Manager
// ========================================
const PDFDownloadManager = {
    init() {
        const btn = document.getElementById('pdfDownloadBtn');
        if (btn) {
            btn.addEventListener('click', () => this.downloadPDF());
        }
    },
    async downloadPDF() {
        const btn = document.getElementById('pdfDownloadBtn');
        const contentArea = document.getElementById('contentArea');
        const markdownBody = document.getElementById('markdownBody');
        
        if (!markdownBody) {
            alert('No content to download');
            return;
        }
        
        btn.disabled = true;
        btn.classList.add('downloading');
        const originalText = btn.textContent;
        btn.textContent = '‚è≥ Generating...';
        
        try {
            // Create a temporary style element for PDF-specific styling
            const pdfStyleId = 'pdf-temp-styles';
            let pdfStyle = document.getElementById(pdfStyleId);
            if (!pdfStyle) {
                pdfStyle = document.createElement('style');
                pdfStyle.id = pdfStyleId;
                pdfStyle.textContent = `
                    @media print {
                        .markdown-body h1 { font-size: 18px !important; font-weight: 700 !important; margin: 16px 0 8px !important; padding-bottom: 8px !important; border-bottom: 2px solid #000 !important; }
                        .markdown-body h2 { font-size: 16px !important; font-weight: 700 !important; margin: 14px 0 8px !important; color: #000 !important; }
                        .markdown-body h3 { font-size: 14px !important; font-weight: 700 !important; margin: 12px 0 6px !important; }
                        .markdown-body h4, .markdown-body h5, .markdown-body h6 { font-size: 13px !important; font-weight: 700 !important; margin: 10px 0 6px !important; }
                        .markdown-body { color: #000 !important; font-size: 12px !important; line-height: 1.6 !important; }
                        .markdown-body p { margin: 8px 0 !important; }
                        .markdown-body a { color: #0366d6 !important; }
                        .markdown-body table { font-size: 11px !important; }
                        .markdown-body code { background: #f6f8fa !important; color: #24292e !important; }
                        .markdown-body pre { background: #f6f8fa !important; color: #24292e !important; }
                    }
                `;
                document.head.appendChild(pdfStyle);
            }
            
            // Save original display states
            const topBar = document.querySelector('.top-bar');
            const tableFilters = document.querySelectorAll('.table-filter-wrapper');
            const tocContainer = document.getElementById('toc-container');
            const sidebar = document.getElementById('sidebar');
            
            const savedStates = {
                topBar: topBar ? topBar.style.display : '',
                sidebar: sidebar ? sidebar.style.display : '',
                tocContainer: tocContainer ? tocContainer.style.display : '',
                filters: []
            };
            
            tableFilters.forEach(filter => {
                savedStates.filters.push(filter.style.display);
                filter.style.display = 'none';
            });
            
            // Hide elements for PDF
            if (topBar) topBar.style.display = 'none';
            if (tocContainer) tocContainer.style.display = 'none';
            if (sidebar) sidebar.style.display = 'none';
            
            // Get the title for the PDF filename
            const titleEl = contentArea.querySelector('.content-title');
            const titleText = titleEl ? titleEl.textContent.trim().substring(1).trim() : 'Document';
            const filename = `${titleText.replace(/[^a-z0-9]/gi, '_').toLowerCase()}_${new Date().toISOString().split('T')[0]}.pdf`;
            
            // Configure html2pdf options with improved quality settings
            const opt = {
                margin: 10,
                filename: filename,
                image: { type: 'png', quality: 1 },
                html2canvas: { scale: 1, useCORS: true, allowTaint: true, logging: false, backgroundColor: '#ffffff' },
                jsPDF: { orientation: 'portrait', unit: 'mm', format: 'a4', compress: false }
            };
            
            // Generate PDF from the actual contentArea in the DOM
            await html2pdf().set(opt).from(contentArea).save();
            
            // Restore original display states
            if (topBar) topBar.style.display = savedStates.topBar;
            if (tocContainer) tocContainer.style.display = savedStates.tocContainer;
            if (sidebar) sidebar.style.display = savedStates.sidebar;
            tableFilters.forEach((filter, idx) => {
                filter.style.display = savedStates.filters[idx];
            });
            
            // Remove temporary style
            if (pdfStyle && pdfStyle.parentNode) {
                pdfStyle.parentNode.removeChild(pdfStyle);
            }
            
            btn.textContent = '‚úì Done!';
            setTimeout(() => {
                btn.textContent = originalText;
                btn.disabled = false;
                btn.classList.remove('downloading');
            }, 1500);
        } catch (error) {
            console.error('PDF generation error:', error);
            alert('Error generating PDF: ' + error.message);
            btn.textContent = originalText;
            btn.disabled = false;
            btn.classList.remove('downloading');
        }
    }
};

// ========================================
// Theme Management
// ========================================
const ThemeManager = {
    init() {
        const savedTheme = localStorage.getItem('theme') || 'dark';
        this.setTheme(savedTheme);
        document.getElementById('themeToggle').addEventListener('click', () => this.toggle());
    },
    setTheme(theme) {
        if (theme === 'light') {
            document.body.classList.add('light-mode');
            localStorage.setItem('theme', 'light');
            document.getElementById('themeToggle').textContent = 'üåû';
            document.getElementById('themeToggle').title = 'Switch to dark mode';
        } else {
            document.body.classList.remove('light-mode');
            localStorage.setItem('theme', 'dark');
            document.getElementById('themeToggle').textContent = 'üåô';
            document.getElementById('themeToggle').title = 'Switch to light mode';
        }
    },
    toggle() {
        const isDark = !document.body.classList.contains('light-mode');
        this.setTheme(isDark ? 'light' : 'dark');
    }
};

// ========================================
// Truncation Management
// ========================================
const TruncationManager = {
    init() {
        const savedTruncate = localStorage.getItem('truncateTableCells');
        AppState.truncateTableCells = savedTruncate !== 'false';
        const btn = document.getElementById('truncationToggle');
        this.updateUI();
        btn.addEventListener('click', () => this.toggle());
    },
    toggle() {
        AppState.truncateTableCells = !AppState.truncateTableCells;
        localStorage.setItem('truncateTableCells', AppState.truncateTableCells);
        this.updateUI();
        this.applyToAllTables();
    },
    updateUI() {
        const btn = document.getElementById('truncationToggle');
        if (AppState.truncateTableCells) {
            btn.textContent = 'üìã Full Text';
            btn.classList.remove('active');
        } else {
            btn.textContent = 'üìã Truncated';
            btn.classList.add('active');
        }
    },
    applyToAllTables() {
        const body = document.getElementById('markdownBody');
        if (!body) return;
        body.querySelectorAll('table').forEach(table => {
            table.querySelectorAll('td').forEach(cell => {
                this.applyToCell(cell);
            });
        });
    },
    applyToCell(cell) {
        if (AppState.truncateTableCells) {
            cell.classList.add('table-cell-truncated');
        } else {
            cell.classList.remove('table-cell-truncated');
        }
    }
};

// ========================================
// Nepali Normalizer
// ========================================
const NepaliNormalizer = {
    vowelMap: { '‡•Ä': '‡§ø', '‡•Ç': '‡•Å' },
    sibilantMap: { '‡§∂': '‡§∏', '‡§∑': '‡§∏' },
    nasalMap: { '‡§ô': '‡§®', '‡§£': '‡§®', '‡§û': '‡§®', '‡§Ç': '‡§®‡•ç' },
    vaBaMap: { '‡§µ': '‡§¨' },
    normalize(text) {
        if (!text) return '';
        let n = text.normalize('NFC').replace(/\u200D/g, '').replace(/\u200C/g, '');
        for (const [f, t] of Object.entries(this.vowelMap)) n = n.split(f).join(t);
        for (const [f, t] of Object.entries(this.sibilantMap)) n = n.split(f).join(t);
        for (const [f, t] of Object.entries(this.nasalMap)) n = n.split(f).join(t);
        for (const [f, t] of Object.entries(this.vaBaMap)) n = n.split(f).join(t);
        return n;
    },
    isDevanagari(text) { return /[\u0900-\u097F]/.test(text); },
    mapToOriginal(normPos, original, normalized) {
        if (normPos <= 0) return 0;
        if (normPos >= normalized.length) return original.length;
        let origIdx = 0, normIdx = 0;
        while (normIdx < normPos && origIdx < original.length) {
            if (original[origIdx] === '\u200D' || original[origIdx] === '\u200C') { origIdx++; continue; }
            origIdx++; normIdx++;
        }
        while (origIdx < original.length && (original[origIdx] === '\u200D' || original[origIdx] === '\u200C')) origIdx++;
        return origIdx;
    }
};

// ========================================
// Discovery & Init
// ========================================
function discoverNotes() {
    const notePattern = /^note([A-Z])(\d)(\d)Content$/;
    AppState.hasReadme = true; // Always enable README, Help, and Namaste navigation
    for (const key of Object.keys(window)) {
        if (key.match(/^group([A-Z])Meta$/)) AppState.groupMeta.set(key.match(/^group([A-Z])Meta$/)[1], window[key]);
        if (key.match(/^unit([A-Z])(\d)Meta$/)) { const m = key.match(/^unit([A-Z])(\d)Meta$/); AppState.unitMeta.set(`${m[1]}${m[2]}`, window[key]); }
        if (key.match(/^combined([A-Z])(\d+)Meta$/)) { const m = key.match(/^combined([A-Z])(\d+)Meta$/); AppState.combinedMeta.set(`${m[1]}${m[2]}`, window[key]); }
    }
    for (const key of Object.keys(window)) {
        const match = key.match(notePattern);
        if (match) {
            const [, group, unit, noteNum] = match;
            const noteId = `${group}${unit}${noteNum}`;
            const meta = window[`note${noteId}Meta`] || { name: noteId, emoji: 'üìÑ', password: null };
            AppState.notes.set(noteId, { id: noteId, group, unit: parseInt(unit), noteNum: parseInt(noteNum), content: window[key], meta });
            if (!AppState.groups.has(group)) AppState.groups.set(group, new Map());
            if (!AppState.groups.get(group).has(parseInt(unit))) AppState.groups.get(group).set(parseInt(unit), []);
            AppState.groups.get(group).get(parseInt(unit)).push(noteId);
        }
    }
    for (const [g, units] of AppState.groups) for (const [u, notes] of units) notes.sort((a, b) => AppState.notes.get(a).noteNum - AppState.notes.get(b).noteNum);
}

async function initPyodide() {
    const bar = document.getElementById('pyodideProgress'), overlay = document.getElementById('pyodideLoading');
    try {
        bar.style.width = '20%';
        AppState.pyodide = await loadPyodide({ indexURL: "https://cdn.jsdelivr.net/pyodide/v0.24.1/full/" });
        bar.style.width = '60%';
        await AppState.pyodide.loadPackage('micropip');
        await AppState.pyodide.pyimport('micropip').install('markdown');
        bar.style.width = '100%';
        await AppState.pyodide.runPythonAsync(`import markdown\ndef convert_markdown(text):\n    md = markdown.Markdown(extensions=['toc','fenced_code','tables','nl2br'])\n    return {'html': md.convert(text), 'toc': md.toc}`);
        setTimeout(() => overlay.classList.add('hidden'), 500);
        return true;
    } catch (e) {
        console.error('Pyodide failed:', e);
        overlay.querySelector('.pyodide-text').textContent = 'Using fallback...';
        setTimeout(() => overlay.classList.add('hidden'), 1000);
        return false;
    }
}

async function renderMarkdown(content) {
    if (AppState.pyodide) {
        try {
            AppState.pyodide.globals.set('markdown_input', content);
            return (await AppState.pyodide.runPythonAsync(`convert_markdown(markdown_input)`)).toJs();
        } catch (e) { return fallbackRender(content); }
    }
    return fallbackRender(content);
}

function fallbackRender(content) {
    let html = content.replace(/```(\w+)?\n([\s\S]*?)```/g, '<pre><code>$2</code></pre>')
        .replace(/`([^`]+)`/g, '<code>$1</code>')
        .replace(/^#### (.+)$/gm, '<h4>$1</h4>').replace(/^### (.+)$/gm, '<h3>$1</h3>')
        .replace(/^## (.+)$/gm, '<h2>$1</h2>').replace(/^# (.+)$/gm, '<h1>$1</h1>')
        .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>').replace(/\*(.+?)\*/g, '<em>$1</em>')
        .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2">$1</a>')
        .replace(/^> (.+)$/gm, '<blockquote>$1</blockquote>')
        .replace(/^- (.+)$/gm, '<li>$1</li>').replace(/^---$/gm, '<hr>');
    return { html, toc: '' };
}

// ========================================
// Navigation
// ========================================
function buildNavigation() {
    const nav = document.getElementById('navContainer'), help = document.getElementById('helpItem'), namaste = document.getElementById('namasteItem'), readme = document.getElementById('readmeItem'),
          publicAll = document.getElementById('publicAllItem'), masterToc = document.getElementById('masterTocContainer');
    nav.innerHTML = '';
    if (AppState.hasReadme) { namaste.style.display = 'flex'; nav.appendChild(namaste); help.style.display = 'flex'; nav.appendChild(help); readme.style.display = 'flex'; nav.appendChild(readme); }
    nav.appendChild(publicAll);
    nav.appendChild(masterToc);
    for (const group of Array.from(AppState.groups.keys()).sort()) nav.appendChild(createGroupDropdown(group));
    buildMasterTOC();
}

function getGroupMeta(g) { return AppState.groupMeta.get(g) || { name: `Group ${g}`, emoji: 'üìÅ', description: '' }; }
function getUnitMeta(g, u) { return AppState.unitMeta.get(`${g}${u}`) || { name: `Unit ${g}${u}`, emoji: 'üìÇ', description: '' }; }
function getCombinedMeta(k) { return AppState.combinedMeta.get(k) || { name: k, emoji: 'üìö', description: '' }; }

function extractHeadings(content) {
    const h = [], re = /^(#{1,2}) (.+)$/gm; let m;
    while ((m = re.exec(content)) !== null) h.push({ level: m[1].length, text: m[2].trim(), id: m[2].toLowerCase().replace(/[^a-z0-9\u0900-\u097F]+/g, '-').replace(/^-|-$/g, '') });
    return h;
}

function buildMasterTOC() {
    const c = document.getElementById('masterTocContent'); c.innerHTML = '';
    for (const group of Array.from(AppState.groups.keys()).sort()) {
        for (const unit of Array.from(AppState.groups.get(group).keys()).sort((a, b) => a - b)) {
            for (const noteId of AppState.groups.get(group).get(unit)) {
                const note = AppState.notes.get(noteId);
                if (note.meta.password !== null && !AppState.unlockedNotes.has(noteId)) continue;
                const headings = extractHeadings(note.content);
                if (headings.length === 0) continue;
                const div = document.createElement('div'); div.className = 'master-toc-note'; div.dataset.noteId = noteId;
                const title = document.createElement('div'); title.className = 'master-toc-note-title';
                title.innerHTML = `<span>${note.meta.emoji}</span> ${note.meta.name}`;
                title.addEventListener('click', () => loadNote(noteId)); div.appendChild(title);
                for (const h of headings) {
                    const link = document.createElement('a'); link.className = `master-toc-heading level-${h.level}`;
                    link.textContent = h.text; link.href = '#';
                    link.addEventListener('click', e => { e.preventDefault(); loadNoteAndScrollToHeading(noteId, h.id); });
                    div.appendChild(link);
                }
                c.appendChild(div);
            }
        }
    }
    if (c.children.length === 0) c.innerHTML = '<div style="color:var(--text-muted);font-size:12px;padding:8px;">No public notes</div>';
}

function createGroupDropdown(group) {
    const gm = getGroupMeta(group), cm = getCombinedMeta(`${group}0`);
    const wrap = document.createElement('div'); wrap.className = 'nav-group';
    const dd = document.createElement('div'); dd.className = 'nav-dropdown';
    dd.innerHTML = `<div class="nav-dropdown-header"><span class="nav-dropdown-icon">‚ñ∂</span><span class="nav-dropdown-title">${gm.emoji} ${gm.name}</span><span class="nav-dropdown-badge">${countPublicNotes(group)}</span></div><div class="nav-dropdown-content"><div class="nav-item combined" data-combined="${group}0"><span class="nav-item-emoji">${cm.emoji}</span><span class="nav-item-name">${group}0 - ${cm.name}</span></div></div>`;
    const content = dd.querySelector('.nav-dropdown-content');
    for (const unit of Array.from(AppState.groups.get(group).keys()).sort((a, b) => a - b)) content.appendChild(createUnitDropdown(group, unit));
    dd.querySelector('.nav-dropdown-header').addEventListener('click', () => dd.classList.toggle('open'));
    dd.querySelector('.nav-item.combined').addEventListener('click', e => { e.stopPropagation(); loadCombinedView(group, null); });
    wrap.appendChild(dd); return wrap;
}

function createUnitDropdown(group, unit) {
    const um = getUnitMeta(group, unit), cm = getCombinedMeta(`${group}0${unit}`);
    const dd = document.createElement('div'); dd.className = 'nav-dropdown';
    dd.innerHTML = `<div class="nav-dropdown-header"><span class="nav-dropdown-icon">‚ñ∂</span><span class="nav-dropdown-title">${um.emoji} ${um.name}</span><span class="nav-dropdown-badge">${countPublicNotesInUnit(group, unit)}</span></div><div class="nav-dropdown-content"><div class="nav-item combined" data-combined="${group}0${unit}"><span class="nav-item-emoji">${cm.emoji}</span><span class="nav-item-name">${group}0${unit} - ${cm.name}</span></div></div>`;
    const content = dd.querySelector('.nav-dropdown-content');
    for (const noteId of AppState.groups.get(group).get(unit)) {
        const note = AppState.notes.get(noteId), isLocked = note.meta.password !== null && !AppState.unlockedNotes.has(noteId), hasPwd = note.meta.password !== null;
        const item = document.createElement('div'); item.className = 'nav-item'; item.dataset.noteId = noteId;
        item.innerHTML = `<span class="nav-item-emoji">${note.meta.emoji}</span><span class="nav-item-name">${note.meta.name}</span>${note.meta.protection === 'YES' ? '<span class="nav-item-protect">üö©</span>' : ''}${hasPwd ? (isLocked ? '<span class="nav-item-lock">üîí</span>' : '<span class="nav-item-unlock">üîì</span>') : '<span class="nav-item-unlock">üîì</span>'}`;
        item.addEventListener('click', e => { e.stopPropagation(); loadNote(noteId); });
        content.appendChild(item);
    }
    dd.querySelector('.nav-dropdown-header').addEventListener('click', e => { e.stopPropagation(); dd.classList.toggle('open'); });
    dd.querySelector('.nav-item.combined').addEventListener('click', e => { e.stopPropagation(); loadCombinedView(group, unit); });
    return dd;
}

function countPublicNotes(g) { let c = 0; for (const n of AppState.groups.get(g).values()) for (const id of n) if (AppState.notes.get(id).meta.password === null || AppState.unlockedNotes.has(id)) c++; return c; }
function countPublicNotesInUnit(g, u) { let c = 0; for (const id of AppState.groups.get(g).get(u)) if (AppState.notes.get(id).meta.password === null || AppState.unlockedNotes.has(id)) c++; return c; }

// ========================================
// Loading Content
// ========================================
async function loadHelp() {
    if (!AppState.hasReadme) return;
    AppState.currentNote = 'help';
    updateBreadcrumb({ meta: window.helpMeta });
    document.getElementById('contentArea').innerHTML = '<div class="loading-container"><div class="loading-spinner"></div><div>Loading...</div></div>';
    try {
        const response = await fetch('Help.md');
        const helpContent = await response.text();
        const rendered = await renderMarkdown(helpContent);
        displayRenderedContent({ meta: window.helpMeta }, rendered);
    } catch (error) {
        console.error('Error loading Help.md:', error);
        const errorContent = '# Help - Error\n\nSorry, the Help documentation could not be loaded. Please check that Help.md exists in the same directory as this application.';
        const rendered = await renderMarkdown(errorContent);
        displayRenderedContent({ meta: window.helpMeta }, rendered);
    }
    document.querySelectorAll('.nav-item,.special-nav-item').forEach(el => el.classList.remove('active'));
    document.getElementById('helpItem').classList.add('active');
}

async function loadNamaste() {
    if (!AppState.hasReadme) return;
    AppState.currentNote = 'namaste';
    updateBreadcrumb({ meta: window.namasteMeta });
    document.getElementById('contentArea').innerHTML = '<div class="loading-container"><div class="loading-spinner"></div><div>Loading...</div></div>';
    try {
        const response = await fetch('NAMASTE.md');
        const namasteContent = await response.text();
        const rendered = await renderMarkdown(namasteContent);
        displayRenderedContent({ meta: window.namasteMeta }, rendered);
    } catch (error) {
        console.error('Error loading NAMASTE.md:', error);
        const errorContent = '# Namaste - Error\n\nSorry, the welcome message could not be loaded. Please check that NAMASTE.md exists in the same directory as this application.';
        const rendered = await renderMarkdown(errorContent);
        displayRenderedContent({ meta: window.namasteMeta }, rendered);
    }
    document.querySelectorAll('.nav-item,.special-nav-item').forEach(el => el.classList.remove('active'));
    document.getElementById('namasteItem').classList.add('active');
}

async function loadReadme() {
    if (!AppState.hasReadme) return;
    AppState.currentNote = 'readme';
    updateBreadcrumb({ meta: window.readmeMeta });
    document.getElementById('contentArea').innerHTML = '<div class="loading-container"><div class="loading-spinner"></div><div>Loading...</div></div>';
    try {
        const response = await fetch('README.md');
        const readmeContent = await response.text();
        const rendered = await renderMarkdown(readmeContent);
        displayRenderedContent({ meta: window.readmeMeta }, rendered);
    } catch (error) {
        console.error('Error loading README.md:', error);
        const errorContent = '# README - Error\n\nSorry, the README documentation could not be loaded. Please check that README.md exists in the same directory as this application.';
        const rendered = await renderMarkdown(errorContent);
        displayRenderedContent({ meta: window.readmeMeta }, rendered);
    }
    document.querySelectorAll('.nav-item,.special-nav-item').forEach(el => el.classList.remove('active'));
    document.getElementById('readmeItem').classList.add('active');
}

async function loadNote(noteId) {
    const note = AppState.notes.get(noteId); if (!note) return;
    if (note.meta.password !== null && !AppState.unlockedNotes.has(noteId)) { showPasswordPrompt(noteId); return; }
    AppState.currentNote = noteId;
    updateActiveNavItem(noteId);
    updateBreadcrumb(note);
    document.getElementById('contentArea').innerHTML = '<div class="loading-container"><div class="loading-spinner"></div><div>Rendering...</div></div>';
    const rendered = await renderMarkdown(note.content);
    displayRenderedContent(note, rendered);
}

async function loadNoteAndScrollToHeading(noteId, headingId) {
    await loadNote(noteId);
    setTimeout(() => { const h = document.getElementById(headingId); if (h) h.scrollIntoView({ behavior: 'smooth', block: 'start' }); }, 100);
}

async function loadCombinedView(group, unit) {
    document.getElementById('contentArea').innerHTML = '<div class="loading-container"><div class="loading-spinner"></div><div>Combining...</div></div>';
    const notes = [], key = unit === null ? `${group}0` : `${group}0${unit}`, meta = getCombinedMeta(key);
    if (unit === null) { for (const [u, ids] of AppState.groups.get(group)) for (const id of ids) { const n = AppState.notes.get(id); if (n.meta.password === null || AppState.unlockedNotes.has(id)) notes.push(n); } }
    else { for (const id of AppState.groups.get(group).get(unit)) { const n = AppState.notes.get(id); if (n.meta.password === null || AppState.unlockedNotes.has(id)) notes.push(n); } }
    updateBreadcrumb({ group, unit, meta });
    if (notes.length === 0) { document.getElementById('contentArea').innerHTML = '<div class="empty-state"><div class="empty-state-icon">üîí</div><div class="empty-state-title">No Public Notes</div></div>'; return; }
    const combined = notes.map(n => n.content).join('\n\n---\n\n');
    const rendered = await renderMarkdown(combined);
    displayRenderedContent({ meta }, rendered, true, notes);
}

async function loadPublicAllNotes() {
    document.getElementById('contentArea').innerHTML = '<div class="loading-container"><div class="loading-spinner"></div><div>Loading all...</div></div>';
    const notes = [];
    for (const group of Array.from(AppState.groups.keys()).sort())
        for (const unit of Array.from(AppState.groups.get(group).keys()).sort((a, b) => a - b))
            for (const id of AppState.groups.get(group).get(unit)) { const n = AppState.notes.get(id); if (n.meta.password === null || AppState.unlockedNotes.has(id)) notes.push(n); }
    const meta = window.publicAllMeta || { name: 'Public All Notes', emoji: 'üåê' };
    updateBreadcrumb({ meta });
    if (notes.length === 0) { document.getElementById('contentArea').innerHTML = '<div class="empty-state"><div class="empty-state-icon">üîí</div><div class="empty-state-title">No Public Notes</div></div>'; return; }
    const combined = notes.map(n => n.content).join('\n\n---\n\n');
    const rendered = await renderMarkdown(combined);
    displayRenderedContent({ meta }, rendered, true, notes);
    document.querySelectorAll('.nav-item,.special-nav-item').forEach(el => el.classList.remove('active'));
    document.getElementById('publicAllItem').classList.add('active');
}

function displayRenderedContent(note, rendered, isCombined = false, notesInCombined = []) {
    const area = document.getElementById('contentArea');
    AppState.originalContent = rendered.html || rendered.get('html');
    const html = rendered.html || rendered.get('html');
    const toc = isCombined && notesInCombined.length ? generateCombinedTOC(html, notesInCombined) : generateCustomTOC(html);
    area.innerHTML = `<header class="content-header"><h1 class="content-title"><span class="content-title-emoji">${note.meta.emoji}</span>${note.meta.name}</h1><div class="content-meta">${note.meta.description || (isCombined ? `${notesInCombined.length} notes combined` : 'Individual note')}</div></header>${toc ? `<nav class="toc-container" id="toc-container"><div class="toc-title">üìã Table of Contents</div><ul class="toc-list${isCombined ? '' : ' single-column'}">${toc}</ul></nav>` : ''}<div class="markdown-body" id="markdownBody">${html}</div>`;

    // Determine protection state: either note.meta.protection or any note in combined
    const metaObj = note && note.meta ? note.meta : {};
    let isProtected = metaObj.protection === 'YES';
    if (!isProtected && isCombined && Array.isArray(notesInCombined)) {
        isProtected = notesInCombined.some(n => n.meta && n.meta.protection === 'YES');
    }

    // Insert a print notice (visible only during print) when protected
    const existingNotice = area.querySelector('.protected-print-notice');
    if (isProtected) {
        if (!existingNotice) {
            const headerEl = area.querySelector('.content-header') || area.firstElementChild;
            if (headerEl) headerEl.insertAdjacentHTML('afterend', '<div class="protected-print-notice">üîí Protected content ‚Äî printing and copying disabled.</div>');
        }
    } else {
        if (existingNotice) existingNotice.remove();
    }

    // Apply protection behaviors
    enforceProtection(document.getElementById('markdownBody'), isProtected);

    addHeadingIds();
    setupTableFilters();
    setupTocClickHandlers();
    clearSearch();
}

function generateCombinedTOC(html, notes) {
    let toc = '';
    AppState.headingIdMap = {};
    AppState.headingCounter = 0;
    
    // Parse HTML to find actual heading sections separated by <hr>
    const div = document.createElement('div');
    div.innerHTML = html;
    const sections = [];
    let currentSection = [];
    
    for (const node of div.childNodes) {
        if (node.nodeName === 'HR') {
            if (currentSection.length > 0) {
                sections.push(currentSection);
                currentSection = [];
            }
        } else {
            currentSection.push(node);
        }
    }
    if (currentSection.length > 0) sections.push(currentSection);
    
    // For each section (note), find headings and create TOC
    for (let noteIndex = 0; noteIndex < sections.length && noteIndex < notes.length; noteIndex++) {
        const section = sections[noteIndex];
        const note = notes[noteIndex];
        const headings = [];
        
        for (const node of section) {
            if (node.nodeName === 'H1' || node.nodeName === 'H2') {
                headings.push({
                    level: parseInt(node.nodeName.charAt(1)),
                    text: node.textContent.trim(),
                    node: node
                });
            }
        }
        
        if (headings.length > 0) {
            toc += `<li class="toc-group-header">${note.meta.emoji} ${note.meta.name}</li>`;
            for (const h of headings) {
                const headingId = `heading-${AppState.headingCounter++}`;
                AppState.headingIdMap[headingId] = { noteIndex, text: h.text, level: h.level };
                toc += `<li class="toc-item level-${h.level}"><a class="toc-link" href="#${headingId}">${h.text}</a></li>`;
            }
        }
    }
    return toc;
}

function generateCustomTOC(html) {
    const div = document.createElement('div'); div.innerHTML = html;
    const headings = div.querySelectorAll('h1, h2');
    if (headings.length === 0) return '';
    let toc = '';
    AppState.headingIdMap = {};
    AppState.headingCounter = 0;
    headings.forEach(h => {
        const level = parseInt(h.tagName.charAt(1)), text = h.textContent.trim();
        const headingId = `heading-${AppState.headingCounter++}`;
        AppState.headingIdMap[headingId] = { text, level };
        toc += `<li class="toc-item level-${level}"><a class="toc-link" href="#${headingId}">${text}</a></li>`;
    });
    return toc;
}

function addHeadingIds() {
    const body = document.getElementById('markdownBody'); if (!body) return;
    
    // Match headings in DOM with the IDs assigned during TOC generation
    const headings = body.querySelectorAll('h1, h2');
    let headingIndex = 0;
    
    for (const h of headings) {
        const headingId = `heading-${headingIndex}`;
        if (AppState.headingIdMap && AppState.headingIdMap[headingId]) {
            h.id = headingId;
        }
        headingIndex++;
        
        // Add "‚Üë TOC" link for h1 and h2
        if (!h.querySelector('.heading-toc-link')) {
            const link = document.createElement('a'); link.className = 'heading-toc-link'; link.href = '#toc-container';
            link.textContent = '‚Üë TOC'; link.title = 'Back to TOC';
            link.addEventListener('click', e => { e.preventDefault(); const t = document.querySelector('.toc-container'); if (t) t.scrollIntoView({ behavior: 'smooth' }); else window.scrollTo({ top: 0, behavior: 'smooth' }); });
            h.appendChild(link);
        }
    }
    
    // Assign IDs to other headings (h3-h6) not in TOC
    let otherIndex = 0;
    body.querySelectorAll('h3,h4,h5,h6').forEach(h => {
        if (!h.id) {
            h.id = `heading-other-${otherIndex++}`;
        }
    });
}

// Protection enforcement: global handlers check AppState.currentProtected
function enforceProtection(area, isProtected) {
    AppState.currentProtected = !!isProtected;
    if (!area) return;

    // Disable/enable copy buttons inside this area
    const copyBtns = area.querySelectorAll('.copy-table-btn, .copy-format-item');
    copyBtns.forEach(b => {
        if (isProtected) { b.setAttribute('disabled', 'true'); b.setAttribute('aria-disabled', 'true'); b.title = 'Disabled for protected content'; }
        else { b.removeAttribute('disabled'); b.removeAttribute('aria-disabled'); b.title = '' }
    });

    // Make images/links non-draggable/clickable when protected
    area.querySelectorAll('img,video').forEach(el => { el.draggable = !isProtected; if (isProtected) el.setAttribute('oncontextmenu', "return false;"); else el.removeAttribute('oncontextmenu'); });
    area.querySelectorAll('a').forEach(a => { if (isProtected) { a.dataset._href = a.getAttribute('href'); a.removeAttribute('href'); } else { if (a.dataset._href) a.setAttribute('href', a.dataset._href); } });
}

// ========================================
// Table Filtering & Media Gallery
// ========================================
function detectMediaTable(table) {
    const mediaExtensions = /\.(jpg|jpeg|png|gif|nef|mp4|mp3|mov|webm|webp)(\?|$|#)/i;
    const rows = table.querySelectorAll('tbody tr, tr:not(:first-child)');
    if (rows.length === 0) return false;
    for (const row of rows) {
        const cells = row.querySelectorAll('td');
        for (const cell of cells) {
            if (mediaExtensions.test(cell.textContent.trim())) return true;
        }
    }
    return false;
}

function convertToMediaGallery(table) {
    const headers = Array.from(table.querySelectorAll('th')).map(th => th.textContent.trim().toLowerCase());
    const rows = Array.from(table.querySelectorAll('tbody tr, tr:not(:first-child)'));
    
    const gallery = document.createElement('div');
    gallery.className = 'media-gallery';
    
    rows.forEach(row => {
        const cells = Array.from(row.querySelectorAll('td'));
        if (cells.length === 0) return;
        
        const data = {};
        cells.forEach((cell, idx) => {
            const header = headers[idx] || `col${idx}`;
            data[header] = cell.textContent.trim();
        });
        
        const title = data.title || data.name || 'Untitled';
        const caption = data.caption || data.description || '';
        const subcaption = data.subcaption || '';
        const url = data.url || data.link || data.media || '';
        const password = data.password || null;
        
        if (!url) return;
        
        const item = document.createElement('div');
        item.className = 'media-item';
        
        const isImage = /\.(jpg|jpeg|png|gif|webp|nef)(\?|$|#)/i.test(url);
        const isVideo = /\.(mp4|mov|webm|mp3)(\?|$|#)/i.test(url);
        
        let thumbnail = '';
        if (isImage) {
            thumbnail = `<img src="${url}" alt="${title}" onerror="this.style.display='none';this.parentElement.innerHTML+='üñºÔ∏è'">`;
        } else if (isVideo) {
            thumbnail = `<video controls><source src="${url}"></video>`;
        } else {
            thumbnail = isImage ? 'üñºÔ∏è' : 'üé¨';
        }
        
        item.innerHTML = `
            <div class="media-item-thumbnail">${thumbnail}</div>
            <div class="media-item-content">
                <div class="media-item-title">${title}</div>
                ${caption ? `<div class="media-item-caption">${caption}</div>` : ''}
                ${subcaption ? `<div class="media-item-subcaption">${subcaption}</div>` : ''}
                ${password ? `<div class="media-item-lock">Password Protected</div>` : ''}
            </div>
        `;
        
        gallery.appendChild(item);
    });
    
    return gallery;
}

function setupTableFilters() {
    const body = document.getElementById('markdownBody'); if (!body) return;
    body.querySelectorAll('table').forEach((table, idx) => {
        const headers = Array.from(table.querySelectorAll('th')).map(th => th.textContent.trim());
        if (headers.length === 0) return;
        
        // Apply truncation to all table cells
        table.querySelectorAll('td').forEach(cell => {
            TruncationManager.applyToCell(cell);
            // Add click handler to toggle full text on click
            cell.addEventListener('click', (e) => {
                e.stopPropagation();
                const isCurrentlyTruncated = cell.classList.contains('table-cell-truncated');
                if (isCurrentlyTruncated) {
                    cell.title = cell.textContent;
                }
            });
        });
        
        // Check if this is a media table
        if (detectMediaTable(table)) {
            const gallery = convertToMediaGallery(table);
            const header = document.createElement('div');
            header.className = 'media-gallery-header';
            header.textContent = 'üé® Media Gallery';
            table.parentNode.insertBefore(header, table);
            table.parentNode.insertBefore(gallery, table);
            table.style.display = 'none';
            return;
        }
        
        processTableLinks(table);
        const wrapper = document.createElement('div'); wrapper.className = 'table-filter-wrapper'; wrapper.id = `filter-${idx}`;
        const columnSelectorId = `col-selector-${idx}`;
        const columnDropdownId = `col-dropdown-${idx}`;
        wrapper.innerHTML = `<div class="table-filter-header"><span class="table-filter-title">üîç Filter Table</span><div class="entries-selector-wrapper"><label class="entries-label">Show</label><select class="entries-dropdown" id="entries-${idx}" data-idx="${idx}"><option value="5">5</option><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option><option value="all">All</option></select><label class="entries-label">entries</label></div><div class="sort-controls-wrapper"><label class="sort-label">Sort by</label><select class="sort-select" id="sort-col-${idx}" data-idx="${idx}"><option value="">Select Column</option>${headers.map((h, i) => `<option value="${i}">${h}</option>`).join('')}</select><select class="sort-method-select" id="sort-method-${idx}" data-idx="${idx}"><option value="asc">Ascending</option><option value="desc">Descending</option><option value="alpha">Alphabetical</option><option value="func">Custom Function</option></select><input type="text" class="sort-function-input" id="sort-func-input-${idx}" placeholder="e.g., CAST(col AS UNSIGNED)" data-idx="${idx}"><button class="sort-apply-btn" id="sort-apply-${idx}" data-idx="${idx}">Apply Sort</button></div><button class="table-filter-toggle" data-idx="${idx}">Show/Hide</button><div class="refresh-ribbon"><button class="filter-btn filter-refresh-btn" data-idx="${idx}" title="Reset table to default state">üîÑ RESET</button></div></div><div class="table-filter-rules" id="rules-${idx}" style="display:none;"></div><div class="filter-actions" id="actions-${idx}" style="display:none;"><button class="filter-btn filter-add-btn" data-idx="${idx}">+ Add Rule</button><button class="filter-btn filter-apply-btn" data-idx="${idx}">Apply</button><button class="filter-btn filter-clear-btn" data-idx="${idx}">Clear</button></div><div class="filter-results" id="results-${idx}"></div><div class="table-copy-wrapper" style="display: flex; gap: 8px; align-items: center;"><div class="column-selector-wrapper"><button class="column-selector-btn" id="${columnSelectorId}" title="Select columns to copy">üìä Columns</button><div class="column-selector-dropdown" id="${columnDropdownId}"><div class="column-selector-header"><label class="column-select-all"><input type="checkbox" class="select-all-cols" data-idx="${idx}" checked><span>All Columns</span></label></div><div class="column-items-list" id="cols-list-${idx}"></div><div class="column-selector-footer"><span id="col-count-${idx}">0/0 selected</span></div></div></div><button class="copy-table-btn" data-table-idx="${idx}" title="Copy table in different formats">üìã Copy</button><div class="copy-formats-dropdown" id="dropdown-${idx}"><div class="copy-format-item" data-format="markdown">Markdown</div><div class="copy-format-item" data-format="json">JSON</div><div class="copy-format-item" data-format="html">HTML</div><div class="copy-format-item" data-format="csv">CSV</div><div class="copy-format-item" data-format="tsv">TSV</div></div></div>`;
        table.parentNode.insertBefore(wrapper, table);
        wrapper.querySelector('.table-filter-toggle').addEventListener('click', () => {
            const rules = document.getElementById(`rules-${idx}`), actions = document.getElementById(`actions-${idx}`);
            const show = rules.style.display === 'none';
            rules.style.display = show ? 'flex' : 'none';
            actions.style.display = show ? 'flex' : 'none';
            if (show && document.getElementById(`rules-${idx}`).children.length === 0) addFilterRule(idx, headers);
        });
        wrapper.querySelector('.filter-add-btn').addEventListener('click', () => addFilterRule(idx, headers));
        wrapper.querySelector('.filter-apply-btn').addEventListener('click', () => applyTableFilter(idx, table, headers));
        wrapper.querySelector('.filter-clear-btn').addEventListener('click', () => clearTableFilter(idx, table));
        wrapper.querySelector('.filter-refresh-btn').addEventListener('click', () => refreshTableToDefault(idx, table));
        
        // Initialize entries selector
        const entriesSelect = wrapper.querySelector(`#entries-${idx}`);
        entriesSelect.addEventListener('change', () => applyEntriesLimit(idx, table, entriesSelect.value));
        // Apply default entries limit of 5 on page load
        applyEntriesLimit(idx, table, '5');
        
        // Initialize sort controls
        const sortColSelect = wrapper.querySelector(`#sort-col-${idx}`);
        const sortMethodSelect = wrapper.querySelector(`#sort-method-${idx}`);
        const sortFuncInput = wrapper.querySelector(`#sort-func-input-${idx}`);
        const sortApplyBtn = wrapper.querySelector(`#sort-apply-${idx}`);
        
        sortMethodSelect.addEventListener('change', () => {
            if (sortMethodSelect.value === 'func') {
                sortFuncInput.classList.add('show');
            } else {
                sortFuncInput.classList.remove('show');
            }
        });
        
        sortApplyBtn.addEventListener('click', () => {
            const colIdx = sortColSelect.value;
            if (colIdx === '') {
                alert('Please select a column to sort');
                return;
            }
            const method = sortMethodSelect.value;
            const funcExpr = method === 'func' ? sortFuncInput.value : '';
            applySortToTable(idx, table, headers, colIdx, method, funcExpr);
        });
        
        // Initialize column selector
        initializeColumnSelector(idx, headers, columnSelectorId, columnDropdownId, table);
        
        const copyBtn = wrapper.querySelector('.copy-table-btn');
        const dropdown = wrapper.querySelector('.copy-formats-dropdown');
        copyBtn.addEventListener('click', (e) => { e.stopPropagation(); dropdown.classList.toggle('open'); });
        dropdown.querySelectorAll('.copy-format-item').forEach(item => {
            item.addEventListener('click', () => copyTableInFormat(table, item.dataset.format, copyBtn, dropdown, idx));
        });
        document.addEventListener('click', (e) => {
            if (!wrapper.contains(e.target)) dropdown.classList.remove('open');
        });
    });
}

function processTableLinks(table) {
    const urlRegex = /^(https?:\/\/[^\s]+)$/i;
    table.querySelectorAll('td, th').forEach(cell => {
        const text = cell.textContent.trim();
        if (urlRegex.test(text)) {
            const truncated = truncateUrl(text);
            cell.innerHTML = `<a href="${text}" target="_blank" rel="noopener noreferrer" title="${text}">${truncated}</a>`;
        }
    });
}

function truncateUrl(url, maxLength = 40) {
    if (url.length <= maxLength) return url;
    const start = url.substring(0, 15);
    const end = url.substring(url.length - 10);
    return `${start}...${end}`;
}

function addFilterRule(idx, headers) {
    const container = document.getElementById(`rules-${idx}`), ruleIdx = container.children.length;
    const rule = document.createElement('div'); rule.className = 'filter-rule'; rule.dataset.ruleIdx = ruleIdx;
    rule.innerHTML = `${ruleIdx > 0 ? '<select class="filter-logic-select"><option value="AND">AND</option><option value="OR">OR</option></select>' : ''}<select class="filter-column">${headers.map((h, i) => `<option value="${i}">${h}</option>`).join('')}</select><select class="filter-operator"><option value="contains">CONTAINS</option><option value="equals">EQUALS</option><option value="like">LIKE (%)</option><option value="not_contains">NOT CONTAINS</option><option value="not_equals">NOT EQUALS</option><option value="gt">></option><option value="lt"><</option><option value="gte">>=</option><option value="lte"><=</option></select><input type="text" class="filter-value" placeholder="Value..."><button class="filter-rule-remove">‚úï</button>`;
    rule.querySelector('.filter-rule-remove').addEventListener('click', () => { rule.remove(); });
    container.appendChild(rule);
}

function applyTableFilter(idx, table, headers) {
    const rules = Array.from(document.getElementById(`rules-${idx}`).querySelectorAll('.filter-rule'));
    const rows = table.querySelectorAll('tbody tr, tr:not(:first-child)');
    let matchCount = 0, totalCount = rows.length;
    rows.forEach(row => {
        const cells = Array.from(row.querySelectorAll('td'));
        if (cells.length === 0) return;
        let match = null;
        rules.forEach((rule, i) => {
            const col = parseInt(rule.querySelector('.filter-column').value);
            const op = rule.querySelector('.filter-operator').value;
            const val = rule.querySelector('.filter-value').value;
            const cellVal = cells[col]?.textContent.trim() || '';
            const ruleMatch = evaluateCondition(cellVal, op, val);
            if (i === 0) { match = ruleMatch; }
            else {
                const logic = rule.querySelector('.filter-logic-select')?.value || 'AND';
                match = logic === 'AND' ? (match && ruleMatch) : (match || ruleMatch);
            }
        });
        if (match) { row.classList.remove('filtered-out'); row.classList.add('filter-match'); matchCount++; }
        else { row.classList.add('filtered-out'); row.classList.remove('filter-match'); }
    });
    document.getElementById(`results-${idx}`).textContent = `Showing ${matchCount} of ${totalCount} rows`;
    // Reapply entries limit after filter
    const entriesSelect = document.querySelector(`#entries-${idx}`);
    if (entriesSelect) {
        applyEntriesLimit(idx, table, entriesSelect.value);
    }
}

function evaluateCondition(cellVal, op, filterVal) {
    const cv = cellVal.toLowerCase(), fv = filterVal.toLowerCase();
    switch (op) {
        case 'contains': return cv.includes(fv);
        case 'equals': return cv === fv;
        case 'like': return new RegExp('^' + fv.replace(/%/g, '.*') + '$', 'i').test(cellVal);
        case 'not_contains': return !cv.includes(fv);
        case 'not_equals': return cv !== fv;
        case 'gt': return parseFloat(cellVal) > parseFloat(filterVal);
        case 'lt': return parseFloat(cellVal) < parseFloat(filterVal);
        case 'gte': return parseFloat(cellVal) >= parseFloat(filterVal);
        case 'lte': return parseFloat(cellVal) <= parseFloat(filterVal);
        default: return true;
    }
}

function clearTableFilter(idx, table) {
    table.querySelectorAll('tr').forEach(r => { r.classList.remove('filtered-out', 'filter-match', 'entries-hidden'); });
    document.getElementById(`results-${idx}`).textContent = '';
    // Reset entries dropdown to default (5)
    const entriesSelect = document.querySelector(`#entries-${idx}`);
    if (entriesSelect) {
        entriesSelect.value = '5';
        applyEntriesLimit(idx, table, '5');
    }
}

function refreshTableToDefault(idx, table) {
    // Restore original row order
    const originalRows = originalRowOrder.get(idx);
    if (originalRows && originalRows.length > 0) {
        const tbody = table.querySelector('tbody') || table;
        // Remove all current rows
        tbody.querySelectorAll('tr').forEach(row => {
            if (row !== table.querySelector('thead tr')) {
                row.remove();
            }
        });
        // Restore original rows with cleaned state
        originalRows.forEach(originalRow => {
            const newRow = originalRow.cloneNode(true);
            // Remove all filter-related classes
            newRow.classList.remove('filtered-out', 'filter-match', 'entries-hidden');
            tbody.appendChild(newRow);
        });
    } else {
        // Fallback: just remove classes if no original rows stored
        table.querySelectorAll('tr').forEach(r => { 
            r.classList.remove('filtered-out', 'filter-match', 'entries-hidden');
        });
    }
    
    // Clear all filter rules
    const rulesContainer = document.getElementById(`rules-${idx}`);
    if (rulesContainer) {
        rulesContainer.innerHTML = '';
    }
    
    // Reset sort dropdowns
    const sortColSelect = document.querySelector(`#sort-col-${idx}`);
    const sortMethodSelect = document.querySelector(`#sort-method-${idx}`);
    const sortFuncInput = document.querySelector(`#sort-func-input-${idx}`);
    if (sortColSelect) sortColSelect.value = '';
    if (sortMethodSelect) sortMethodSelect.value = 'asc';
    if (sortFuncInput) {
        sortFuncInput.value = '';
        sortFuncInput.classList.remove('show');
    }
    
    // Reset filter results and clear filter display
    document.getElementById(`results-${idx}`).textContent = '';
    
    // Reset entries dropdown to default (5)
    const entriesSelect = document.querySelector(`#entries-${idx}`);
    if (entriesSelect) {
        entriesSelect.value = '5';
        applyEntriesLimit(idx, table, '5');
    }
    
    // Reset column selection to all columns
    const allCheckboxes = document.querySelectorAll(`.col-checkbox[data-table-idx="${idx}"]`);
    allCheckboxes.forEach(checkbox => {
        checkbox.checked = true;
    });
    const selectAllCheckbox = document.querySelector(`.select-all-cols[data-idx="${idx}"]`);
    if (selectAllCheckbox) selectAllCheckbox.checked = true;
    updateColumnSelection(idx);
    
    // Update all table cells visibility
    table.querySelectorAll('th, td').forEach(cell => {
        if (cell.dataset.colIdx !== undefined) {
            cell.style.display = '';
        }
    });
    
    // Hide the filter rules and actions sections
    const rules = document.getElementById(`rules-${idx}`);
    const actions = document.getElementById(`actions-${idx}`);
    if (rules) rules.style.display = 'none';
    if (actions) actions.style.display = 'none';
}

function applyEntriesLimit(idx, table, entriesValue) {
    const rows = table.querySelectorAll('tbody tr, tr:not(:first-child)');
    let visibleCount = 0;
    const limit = entriesValue === 'all' ? rows.length : parseInt(entriesValue);
    
    rows.forEach((row, index) => {
        // Check if row is already hidden by filter
        if (row.classList.contains('filtered-out')) {
            row.classList.add('entries-hidden');
        } else if (visibleCount < limit) {
            row.classList.remove('entries-hidden');
            visibleCount++;
        } else {
            row.classList.add('entries-hidden');
        }
    });
}

function applySortToTable(idx, table, headers, colIdx, method, funcExpr) {
    const colIndex = parseInt(colIdx);
    const rows = Array.from(table.querySelectorAll('tbody tr, tr:not(:first-child)'));
    
    const sortedRows = rows.sort((rowA, rowB) => {
        const cellA = rowA.querySelectorAll('td')[colIndex];
        const cellB = rowB.querySelectorAll('td')[colIndex];
        const valA = cellA ? cellA.textContent.trim() : '';
        const valB = cellB ? cellB.textContent.trim() : '';
        
        switch (method) {
            case 'asc':
                const numA = parseFloat(valA);
                const numB = parseFloat(valB);
                if (!isNaN(numA) && !isNaN(numB)) {
                    return numA - numB;
                }
                return valA.localeCompare(valB);
            case 'desc':
                const numA2 = parseFloat(valA);
                const numB2 = parseFloat(valB);
                if (!isNaN(numA2) && !isNaN(numB2)) {
                    return numB2 - numA2;
                }
                return valB.localeCompare(valA);
            case 'alpha':
                return valA.localeCompare(valB);
            case 'func':
                return evaluateCustomSort(valA, valB, funcExpr);
            default:
                return 0;
        }
    });
    
    const tbody = table.querySelector('tbody') || table;
    sortedRows.forEach(row => {
        tbody.appendChild(row);
    });
}

function evaluateCustomSort(valA, valB, funcExpr) {
    try {
        const safeFunc = funcExpr.replace(/col/g, 'val');
        const result = new Function('val', `return ${safeFunc}`);
        const transformA = result(valA);
        const transformB = result(valB);
        
        const numA = parseFloat(transformA);
        const numB = parseFloat(transformB);
        
        if (!isNaN(numA) && !isNaN(numB)) {
            return numA - numB;
        }
        return String(transformA).localeCompare(String(transformB));
    } catch (e) {
        console.error('Custom sort function error:', e);
        return 0;
    }
}

// ========================================
// Column Selection Management
// ========================================
const columnSelectionState = new Map();
const tableReferences = new Map();
const originalRowOrder = new Map();

function initializeColumnSelector(tableIdx, headers, buttonId, dropdownId, table) {
    // Store table reference for later use
    tableReferences.set(tableIdx, table);
    
    // Store original row order for reset functionality
    if (!originalRowOrder.has(tableIdx)) {
        const rows = Array.from(table.querySelectorAll('tbody tr, tr:not(:first-child)'));
        originalRowOrder.set(tableIdx, rows.map(row => row.cloneNode(true)));
    }
    
    // Initialize state for this table
    if (!columnSelectionState.has(tableIdx)) {
        columnSelectionState.set(tableIdx, new Set(headers.map((_, i) => i)));
    }
    
    // Mark all table cells with column index
    table.querySelectorAll('thead tr').forEach(row => {
        const cells = row.querySelectorAll('th');
        cells.forEach((cell, idx) => {
            cell.dataset.colIdx = idx;
        });
    });
    
    table.querySelectorAll('tbody tr, tr:not(:first-child)').forEach(row => {
        const cells = row.querySelectorAll('td, th');
        cells.forEach((cell, idx) => {
            cell.dataset.colIdx = idx;
        });
    });
    
    const btn = document.getElementById(buttonId);
    const dropdown = document.getElementById(dropdownId);
    const itemsList = document.getElementById(`cols-list-${tableIdx}`);
    
    // Create column items
    headers.forEach((header, idx) => {
        const item = document.createElement('div');
        item.className = 'column-item';
        item.innerHTML = `<input type="checkbox" class="col-checkbox" data-col-idx="${idx}" data-table-idx="${tableIdx}" checked><label><span>${header || 'Column ' + (idx + 1)}</span></label>`;
        itemsList.appendChild(item);
        
        const checkbox = item.querySelector('input[type="checkbox"]');
        checkbox.addEventListener('change', () => updateColumnSelection(tableIdx));
        item.querySelector('label').addEventListener('click', (e) => {
            e.preventDefault();
            checkbox.checked = !checkbox.checked;
            checkbox.dispatchEvent(new Event('change'));
        });
    });
    
    // Select all checkbox
    const selectAllCheckbox = dropdown.querySelector('.select-all-cols');
    selectAllCheckbox.addEventListener('change', () => toggleAllColumns(tableIdx));
    
    // Button click handler
    btn.addEventListener('click', (e) => {
        e.stopPropagation();
        dropdown.classList.toggle('open');
    });
    
    // Close on outside click
    document.addEventListener('click', (e) => {
        if (!dropdown.parentElement.contains(e.target)) {
            dropdown.classList.remove('open');
        }
    });
    
    updateColumnSelection(tableIdx);
}

function updateColumnSelection(tableIdx) {
    const checkboxes = document.querySelectorAll(`.col-checkbox[data-table-idx="${tableIdx}"]`);
    const selected = Array.from(checkboxes)
        .filter(cb => cb.checked)
        .map(cb => parseInt(cb.dataset.colIdx));
    
    columnSelectionState.set(tableIdx, new Set(selected));
    
    // Update select all checkbox
    const selectAllCheckbox = document.querySelector(`.select-all-cols[data-idx="${tableIdx}"]`);
    const totalCols = checkboxes.length;
    const selectedCols = selected.length;
    
    if (selectAllCheckbox) {
        selectAllCheckbox.checked = selectedCols === totalCols;
    }
    
    // Update count display
    const countDisplay = document.getElementById(`col-count-${tableIdx}`);
    if (countDisplay) {
        countDisplay.textContent = `${selectedCols}/${totalCols} selected`;
    }
    
    // Apply column visibility to table
    applyColumnVisibility(tableIdx, selected, totalCols);
}

function applyColumnVisibility(tableIdx, selectedCols, totalCols) {
    const table = tableReferences.get(tableIdx);
    if (!table) return;
    
    // Update all rows in the table
    table.querySelectorAll('tr').forEach(row => {
        const cells = row.querySelectorAll('th, td');
        cells.forEach((cell, idx) => {
            if (selectedCols.includes(idx)) {
                cell.classList.remove('hidden-column');
            } else {
                cell.classList.add('hidden-column');
            }
        });
    });
}

function toggleAllColumns(tableIdx) {
    const selectAllCheckbox = document.querySelector(`.select-all-cols[data-idx="${tableIdx}"]`);
    const checkboxes = document.querySelectorAll(`.col-checkbox[data-table-idx="${tableIdx}"]`);
    
    checkboxes.forEach(cb => {
        cb.checked = selectAllCheckbox.checked;
    });
    
    updateColumnSelection(tableIdx);
}

function getSelectedColumns(tableIdx) {
    const selected = columnSelectionState.get(tableIdx);
    if (!selected || selected.size === 0) {
        return null;
    }
    return Array.from(selected).sort((a, b) => a - b);
}

function copyTableToClipboard(table, button) {
    if (AppState.currentProtected) { console.warn('Copy disabled for protected content'); return; }
    const rows = [];
    table.querySelectorAll('tr').forEach(row => {
        const cells = [];
        row.querySelectorAll('td, th').forEach(cell => {
            cells.push(cell.textContent.trim());
        });
        if (cells.length > 0) rows.push(cells.join('\t'));
    });
    const text = rows.join('\n');
    navigator.clipboard.writeText(text).then(() => {
        const originalText = button.textContent;
        button.textContent = '‚úì Copied';
        button.classList.add('copied');
        setTimeout(() => {
            button.textContent = originalText;
            button.classList.remove('copied');
        }, 2000);
    }).catch(err => {
        console.error('Failed to copy table:', err);
    });
}

function getTableData(table, selectedColumns = null) {
    const headers = [];
    const rows = [];
    
    // Helper function to extract text preserving line breaks
    const getCellContent = (cell) => {
        const cloned = cell.cloneNode(true);
        let text = '';
        cloned.childNodes.forEach(node => {
            if (node.nodeType === Node.TEXT_NODE) {
                text += node.textContent;
            } else if (node.nodeType === Node.ELEMENT_NODE) {
                if (node.tagName === 'BR') {
                    text += '\n';
                } else {
                    text += node.textContent;
                }
            }
        });
        return text.trim();
    };
    
    table.querySelectorAll('thead tr').forEach(row => {
        row.querySelectorAll('th').forEach(cell => headers.push(getCellContent(cell)));
    });
    if (headers.length === 0) {
        const firstRow = table.querySelector('tr');
        if (firstRow) firstRow.querySelectorAll('th').forEach(cell => headers.push(getCellContent(cell)));
    }
    table.querySelectorAll('tbody tr, tr:not(:first-child)').forEach(row => {
        const cells = [];
        row.querySelectorAll('td, th').forEach(cell => cells.push(getCellContent(cell)));
        if (cells.length > 0) rows.push(cells);
    });
    
    // Filter by selected columns if provided
    if (selectedColumns && selectedColumns.length > 0 && selectedColumns.length < headers.length) {
        const filteredHeaders = headers.filter((_, idx) => selectedColumns.includes(idx));
        const filteredRows = rows.map(row => row.filter((_, idx) => selectedColumns.includes(idx)));
        return { headers: filteredHeaders, rows: filteredRows };
    }
    
    return { headers, rows };
}

function tableToMarkdown(data) {
    const { headers, rows } = data;
    const escapeMarkdown = (str) => str.replace(/\n/g, '<br>');
    let markdown = '| ' + headers.map(escapeMarkdown).join(' | ') + ' |\n';
    markdown += '|' + headers.map(() => '---|').join('') + '\n';
    rows.forEach(row => {
        markdown += '| ' + row.map(escapeMarkdown).join(' | ') + ' |\n';
    });
    return markdown;
}

function tableToJSON(data) {
    const { headers, rows } = data;
    const json = rows.map(row => {
        const obj = {};
        headers.forEach((header, idx) => obj[header] = row[idx] || '');
        return obj;
    });
    return JSON.stringify(json, null, 2);
}

function tableToHTML(data) {
    const { headers, rows } = data;
    const escapeHTML = (str) => {
        const div = document.createElement('div');
        div.textContent = str;
        let html = div.innerHTML;
        // Preserve line breaks as <br> tags
        html = html.replace(/\n/g, '<br>');
        return html;
    };
    let html = '<table>\n<thead>\n<tr>\n';
    headers.forEach(header => html += `<th>${escapeHTML(header)}</th>\n`);
    html += '</tr>\n</thead>\n<tbody>\n';
    rows.forEach(row => {
        html += '<tr>\n';
        row.forEach(cell => html += `<td>${escapeHTML(cell)}</td>\n`);
        html += '</tr>\n';
    });
    html += '</tbody>\n</table>';
    return html;
}

function tableToCSV(data) {
    const { headers, rows } = data;
    const escapeCSV = (str) => {
        // CSV fields with line breaks, commas, or quotes must be quoted and internal quotes doubled
        if (str.includes(',') || str.includes('"') || str.includes('\n') || str.includes('\r')) {
            return '"' + str.replace(/"/g, '""') + '"';
        }
        return str;
    };
    let csv = headers.map(escapeCSV).join(',') + '\n';
    rows.forEach(row => {
        csv += row.map(escapeCSV).join(',') + '\n';
    });
    return csv;
}

function tableToTSV(data) {
    const { headers, rows } = data;
    // TSV: preserve line breaks as-is within tab-separated values
    let tsv = headers.join('\t') + '\n';
    rows.forEach(row => {
        tsv += row.join('\t') + '\n';
    });
    return tsv;
}

function copyTableInFormat(table, format, button, dropdown, tableIdx) {
    if (AppState.currentProtected) { console.warn('Copy disabled for protected content'); return; }
    
    // Get selected columns
    const selectedColumns = getSelectedColumns(tableIdx);
    const data = getTableData(table, selectedColumns);
    let content = '';
    
    switch (format) {
        case 'markdown': content = tableToMarkdown(data); break;
        case 'json': content = tableToJSON(data); break;
        case 'html': content = tableToHTML(data); break;
        case 'csv': content = tableToCSV(data); break;
        case 'tsv': content = tableToTSV(data); break;
    }
    
    navigator.clipboard.writeText(content).then(() => {
        dropdown.classList.remove('open');
        const originalText = button.textContent;
        button.textContent = '‚úì Copied';
        button.classList.add('copied');
        setTimeout(() => {
            button.textContent = originalText;
            button.classList.remove('copied');
        }, 2000);
    }).catch(err => {
        console.error('Failed to copy table:', err);
    });
}

// ========================================
// Password (Notes)
// ========================================
function showPasswordPrompt(noteId) {
    const note = AppState.notes.get(noteId), overlay = document.getElementById('passwordOverlay');
    document.getElementById('passwordNoteTitle').textContent = `Unlock "${note.meta.name}"`;
    document.getElementById('passwordInput').value = '';
    document.getElementById('passwordError').classList.remove('visible');
    overlay.dataset.noteId = noteId;
    overlay.classList.add('visible');
    setTimeout(() => document.getElementById('passwordInput').focus(), 100);
}
function hidePasswordPrompt() { document.getElementById('passwordOverlay').classList.remove('visible'); }
function validatePassword() {
    const overlay = document.getElementById('passwordOverlay'), noteId = overlay.dataset.noteId;
    const input = document.getElementById('passwordInput'), error = document.getElementById('passwordError');
    const note = AppState.notes.get(noteId);
    if (input.value === note.meta.password) { AppState.unlockedNotes.add(noteId); hidePasswordPrompt(); buildNavigation(); loadNote(noteId); }
    else { error.classList.add('visible'); input.value = ''; input.focus(); }
}

// ========================================
// Search
// ========================================
function performSearch(query) {
    const body = document.getElementById('markdownBody');
    if (!body || !query.trim()) { clearSearch(); return; }
    body.innerHTML = AppState.originalContent;
    addHeadingIds();
    processSmartLinks();
    processMediaGalleries();
    AppState.searchMatches = [];
    AppState.currentMatchIndex = -1;
    const isNepali = NepaliNormalizer.isDevanagari(query);
    if (isNepali) highlightDevanagari(body, query);
    else highlightMatches(body, query.toLowerCase());
    updateSearchUI();
    if (AppState.searchMatches.length > 0) navigateToMatch(0);
}

function highlightDevanagari(el, query) {
    const walker = document.createTreeWalker(el, NodeFilter.SHOW_TEXT, null, false);
    const nodes = []; while (walker.nextNode()) nodes.push(walker.currentNode);
    const normQuery = NepaliNormalizer.normalize(query.toLowerCase());
    for (const node of nodes) {
        const text = node.textContent, normText = NepaliNormalizer.normalize(text.toLowerCase());
        const matches = [];
        let start = 0;
        while (start < normText.length) {
            const found = normText.indexOf(normQuery, start);
            if (found === -1) break;
            const origStart = NepaliNormalizer.mapToOriginal(found, text, normText);
            const origEnd = NepaliNormalizer.mapToOriginal(found + normQuery.length, text, normText);
            if (origStart !== -1 && origEnd !== -1 && origStart < origEnd) matches.push({ start: origStart, end: origEnd });
            start = found + 1;
        }
        if (matches.length > 0) {
            const frag = document.createDocumentFragment();
            let last = 0;
            for (const m of matches) {
                if (m.start > last) frag.appendChild(document.createTextNode(text.substring(last, m.start)));
                const mark = document.createElement('mark'); mark.className = 'search-highlight';
                mark.textContent = text.substring(m.start, m.end);
                mark.dataset.matchIndex = AppState.searchMatches.length;
                AppState.searchMatches.push(mark);
                frag.appendChild(mark);
                last = m.end;
            }
            if (last < text.length) frag.appendChild(document.createTextNode(text.substring(last)));
            node.parentNode.replaceChild(frag, node);
        }
    }
}

function highlightMatches(el, query) {
    const walker = document.createTreeWalker(el, NodeFilter.SHOW_TEXT, null, false);
    const nodes = []; while (walker.nextNode()) nodes.push(walker.currentNode);
    for (const node of nodes) {
        const text = node.textContent;
        if (text.toLowerCase().includes(query)) {
            const frag = document.createDocumentFragment();
            const regex = new RegExp(query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'gi');
            let last = 0, match;
            while ((match = regex.exec(text)) !== null) {
                if (match.index > last) frag.appendChild(document.createTextNode(text.substring(last, match.index)));
                const mark = document.createElement('mark'); mark.className = 'search-highlight';
                mark.textContent = match[0]; mark.dataset.matchIndex = AppState.searchMatches.length;
                AppState.searchMatches.push(mark); frag.appendChild(mark);
                last = regex.lastIndex;
            }
            if (last < text.length) frag.appendChild(document.createTextNode(text.substring(last)));
            node.parentNode.replaceChild(frag, node);
        }
    }
}

function navigateToMatch(idx) {
    if (AppState.searchMatches.length === 0) return;
    if (AppState.currentMatchIndex >= 0) AppState.searchMatches[AppState.currentMatchIndex]?.classList.remove('active');
    AppState.currentMatchIndex = idx;
    const match = AppState.searchMatches[idx];
    if (match) { match.classList.add('active'); match.scrollIntoView({ behavior: 'smooth', block: 'center' }); }
    updateSearchUI();
}
function navigatePrevMatch() { if (AppState.searchMatches.length === 0) return; let idx = AppState.currentMatchIndex - 1; if (idx < 0) idx = AppState.searchMatches.length - 1; navigateToMatch(idx); }
function navigateNextMatch() { if (AppState.searchMatches.length === 0) return; let idx = AppState.currentMatchIndex + 1; if (idx >= AppState.searchMatches.length) idx = 0; navigateToMatch(idx); }
function clearSearch() {
    document.getElementById('searchInput').value = '';
    AppState.searchMatches = []; AppState.currentMatchIndex = -1;
    const body = document.getElementById('markdownBody');
    if (body && AppState.originalContent) { body.innerHTML = AppState.originalContent; addHeadingIds(); processSmartLinks(); processMediaGalleries(); setupTableFilters(); setupTocClickHandlers(); }
    updateSearchUI();
}
function updateSearchUI() {
    const nav = document.getElementById('searchNav'), counter = document.getElementById('searchCounter');
    const prev = document.getElementById('searchPrev'), next = document.getElementById('searchNext');
    const clear = document.getElementById('clearSearch'), input = document.getElementById('searchInput');
    const hasMatches = AppState.searchMatches.length > 0, hasQuery = input.value.trim().length > 0;
    nav.classList.toggle('visible', hasQuery);
    clear.classList.toggle('visible', hasQuery);
    if (hasMatches) { counter.textContent = `${AppState.currentMatchIndex + 1} / ${AppState.searchMatches.length}`; prev.disabled = false; next.disabled = false; }
    else { counter.textContent = hasQuery ? '0 / 0' : ''; prev.disabled = true; next.disabled = true; }
}

// ========================================
// UI Helpers
// ========================================
function updateActiveNavItem(noteId) {
    document.querySelectorAll('.nav-item,.special-nav-item').forEach(el => el.classList.remove('active'));
    const item = document.querySelector(`.nav-item[data-note-id="${noteId}"]`);
    if (item) { item.classList.add('active'); let p = item.closest('.nav-dropdown'); while (p) { p.classList.add('open'); p = p.parentElement.closest('.nav-dropdown'); } }
}
function updateBreadcrumb(note) {
    const bc = document.getElementById('breadcrumb');
    let path = ['Notes'];
    if (note.group) path.push(`Group ${note.group}`);
    if (note.unit) path.push(`Unit ${note.unit}`);
    path.push(note.meta.name);
    bc.innerHTML = path.map((item, i) => `<span class="breadcrumb-item ${i === path.length - 1 ? 'active' : ''}">${item}</span>${i < path.length - 1 ? '<span class="breadcrumb-separator">/</span>' : ''}`).join('');
}
function setupBackToTop() {
    const btn = document.getElementById('backToTop');
    window.addEventListener('scroll', () => { btn.classList.toggle('visible', window.scrollY > 300); });
    btn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
}

// Global protection handlers: prevent copy/select/print when viewing protected content
(function() {
    document.addEventListener('copy', (e) => {
        if (!AppState.currentProtected) return;
        const body = document.getElementById('markdownBody'); if (!body) return;
        if (body.contains(e.target)) e.preventDefault();
    });
    ['cut','contextmenu','selectstart','dragstart'].forEach(ev => document.addEventListener(ev, (e) => {
        if (!AppState.currentProtected) return;
        const body = document.getElementById('markdownBody'); if (!body) return;
        if (body.contains(e.target)) e.preventDefault();
    }));

    window.addEventListener('keydown', (e) => {
        if (!AppState.currentProtected) return;
        const body = document.getElementById('markdownBody'); if (!body) return;
        if (!body.contains(document.activeElement) && !body.contains(e.target)) return;
        // Block common copy/print/save shortcuts
        if ((e.ctrlKey || e.metaKey) && ['c','p','s','a'].includes((e.key || '').toLowerCase())) {
            e.preventDefault(); e.stopPropagation();
        }
    });
})();

// ========================================
// Event Listeners
// ========================================
function setupEventListeners() {
    document.getElementById('masterTocHeader').addEventListener('click', () => document.getElementById('masterTocContainer').classList.toggle('open'));
    document.getElementById('helpItem').addEventListener('click', loadHelp);
    document.getElementById('namasteItem').addEventListener('click', loadNamaste);
    document.getElementById('readmeItem').addEventListener('click', loadReadme);
    document.getElementById('publicAllItem').addEventListener('click', loadPublicAllNotes);
    
    // Note password modal
    document.getElementById('passwordCancel').addEventListener('click', hidePasswordPrompt);
    document.getElementById('passwordSubmit').addEventListener('click', validatePassword);
    document.getElementById('passwordInput').addEventListener('keypress', e => { if (e.key === 'Enter') validatePassword(); });
    document.getElementById('passwordOverlay').addEventListener('click', e => { if (e.target === e.currentTarget) hidePasswordPrompt(); });
    
    // Media password modal
    document.getElementById('mediaPasswordCancel').addEventListener('click', hideMediaPasswordPrompt);
    document.getElementById('mediaPasswordSubmit').addEventListener('click', validateMediaPassword);
    document.getElementById('mediaPasswordInput').addEventListener('keypress', e => { if (e.key === 'Enter') validateMediaPassword(); });
    document.getElementById('mediaPasswordOverlay').addEventListener('click', e => { if (e.target === e.currentTarget) hideMediaPasswordPrompt(); });
    
    // Lightbox
    document.getElementById('lightboxClose').addEventListener('click', closeLightbox);
    document.getElementById('lightboxPrev').addEventListener('click', () => navigateLightbox(-1));
    document.getElementById('lightboxNext').addEventListener('click', () => navigateLightbox(1));
    document.getElementById('lightboxOverlay').addEventListener('click', e => { if (e.target === e.currentTarget) closeLightbox(); });
    
    // Search
    let searchTimeout;
    document.getElementById('searchInput').addEventListener('input', e => { clearTimeout(searchTimeout); searchTimeout = setTimeout(() => performSearch(e.target.value), 300); });
    document.getElementById('searchPrev').addEventListener('click', navigatePrevMatch);
    document.getElementById('searchNext').addEventListener('click', navigateNextMatch);
    document.getElementById('clearSearch').addEventListener('click', clearSearch);
    
    // Keyboard shortcuts
    document.addEventListener('keydown', e => {
        if ((e.ctrlKey || e.metaKey) && e.key === 'f') { e.preventDefault(); document.getElementById('searchInput').focus(); }
        if (e.key === 'F3' || (e.key === 'Enter' && document.activeElement.id === 'searchInput')) { e.preventDefault(); e.shiftKey ? navigatePrevMatch() : navigateNextMatch(); }
        if (e.key === 'Escape') {
            if (document.getElementById('lightboxOverlay').classList.contains('visible')) { closeLightbox(); }
            else if (document.getElementById('mediaPasswordOverlay').classList.contains('visible')) { hideMediaPasswordPrompt(); }
            else if (document.getElementById('passwordOverlay').classList.contains('visible')) { hidePasswordPrompt(); }
            else { clearSearch(); document.getElementById('searchInput').blur(); }
        }
        // Lightbox navigation
        if (document.getElementById('lightboxOverlay').classList.contains('visible')) {
            if (e.key === 'ArrowLeft') navigateLightbox(-1);
            if (e.key === 'ArrowRight') navigateLightbox(1);
        }
    });
    
    document.getElementById('floatingMenuBtn').addEventListener('click', () => {
        const sidebar = document.getElementById('sidebar');
        const btn = document.getElementById('floatingMenuBtn');
        sidebar.classList.toggle('open');
        btn.classList.toggle('active', sidebar.classList.contains('open'));
    });
    
    // Close sidebar when clicking on content area (mobile)
    document.getElementById('contentArea').addEventListener('click', () => {
        if (window.innerWidth <= 768) {
            document.getElementById('sidebar').classList.remove('open');
        }
    });
}

// ========================================
// Init
// ========================================
async function init() {
    ThemeManager.init();
    TruncationManager.init();
    PDFDownloadManager.init();
    discoverNotes();
    await initPyodide();
    buildNavigation();
    setupEventListeners();
    setupBackToTop();
    console.log('üìö Notes Viewer initialized:', AppState.notes.size, 'notes in', AppState.groups.size, 'groups');
}
document.addEventListener('DOMContentLoaded', init);

// ========================================
// Media & Gallery Functions
// ========================================
function processSmartLinks() {
    const body = document.getElementById('markdownBody'); if (!body) return;
    // Processes smart links - currently a placeholder
}

function processMediaGalleries() {
    const body = document.getElementById('markdownBody'); if (!body) return;
    // Processes media galleries - currently a placeholder
}

function setupTocClickHandlers() {
    document.querySelectorAll('.toc-link').forEach(link => {
        link.addEventListener('click', e => {
            e.preventDefault();
            const id = link.getAttribute('href').substring(1);
            const el = document.getElementById(id);
            if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });
    });
}

// ========================================
// Lightbox Functions
// ========================================
function closeLightbox() {
    const overlay = document.getElementById('lightboxOverlay');
    if (overlay) overlay.classList.remove('visible');
}

function navigateLightbox(direction) {
    // Placeholder for lightbox navigation
}

// ========================================
// Media Password Functions
// ========================================
function hideMediaPasswordPrompt() {
    const overlay = document.getElementById('mediaPasswordOverlay');
    if (overlay) overlay.classList.remove('visible');
}

function validateMediaPassword() {
    const overlay = document.getElementById('mediaPasswordOverlay');
    const input = document.getElementById('mediaPasswordInput');
    const error = document.getElementById('mediaPasswordError');
    if (!overlay || !input) return;
    
    const mediaId = overlay.dataset.mediaId;
    const correctPassword = overlay.dataset.correctPassword || '';
    
    if (input.value === correctPassword) {
        hideMediaPasswordPrompt();
        // Reveal media element
        const mediaEl = document.getElementById(mediaId);
        if (mediaEl) mediaEl.classList.remove('locked');
    } else {
        if (error) error.classList.add('visible');
        input.value = '';
        input.focus();
    }
}

// ========================================
// DOM Initialization
// ========================================
document.addEventListener('DOMContentLoaded', () => {
    const lightboxOverlay = document.getElementById('lightboxOverlay');
    if (!lightboxOverlay) {
        const overlay = document.createElement('div');
        overlay.id = 'lightboxOverlay';
        overlay.className = 'lightbox-overlay';
        overlay.style.display = 'none';
        overlay.innerHTML = '<div class="lightbox-content"><button id="lightboxClose" class="lightbox-close">√ó</button><button id="lightboxPrev" class="lightbox-nav lightbox-prev">‚ùÆ</button><img id="lightboxImage" class="lightbox-image" /><button id="lightboxNext" class="lightbox-nav lightbox-next">‚ùØ</button></div>';
        document.body.appendChild(overlay);
    }
    
    const mediaPasswordOverlay = document.getElementById('mediaPasswordOverlay');
    if (!mediaPasswordOverlay) {
        const overlay = document.createElement('div');
        overlay.id = 'mediaPasswordOverlay';
        overlay.className = 'password-overlay';
        overlay.style.display = 'none';
        overlay.innerHTML = '<div class="password-modal"><div class="password-header">Unlock Media</div><input type="password" id="mediaPasswordInput" class="password-input" placeholder="Enter password..."><div id="mediaPasswordError" class="password-error" style="display:none;">Wrong password</div><div class="password-buttons"><button id="mediaPasswordCancel" class="password-cancel">Cancel</button><button id="mediaPasswordSubmit" class="password-submit">Unlock</button></div></div>';
        document.body.appendChild(overlay);
    }
});

document.addEventListener('DOMContentLoaded', init);
    </script>
      <script src="datanoteU14.js"></script>      
</body>
</html>

